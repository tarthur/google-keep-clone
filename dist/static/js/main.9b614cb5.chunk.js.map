{"version":3,"sources":["components/common/logo/logo.module.scss","components/add-notes-panel/add-notes-panel.module.scss","components/common/picture-preview-box/picture-preview-box.module.scss","components/common/list/form/form.module.scss","components/note-preview/list-note-preview/list-note-preview.module.scss","components/common/spinner/spinner.module.scss","components/common/input-file/input-file.module.scss","components/common/fix-mark/fix-mark.module.scss","components/common/panel-title/panel-title.module.scss","components/common/picture-preview/picture-preview.module.scss","components/common/note-panel/note-panel.module.scss","components/common/list/list-items/list-items.module.scss","components/common/img-box/img-box.module.scss","components/app/app.module.scss","components/note-preview/note-preview.module.scss","components/common/logo/logo.png","components/common/click-icon/click-icon.module.scss","styles/btn.module.scss","components/common/add-btn/add-btn.module.scss","components/common/choose-color/choose-color.module.scss","components/modal-box/modal-box.module.scss","components/common/spinner/puff.svg","components/all-notes/all-notes.module.scss","components/header/header.module.scss","components/common/note-bottom-panel/note-bottom-panel.module.scss","components/common/list/todo-list-item/todo-list-item.module.scss","components/note-preview/modal-container/modal-container.module.scss","config/fbConfig.js","utils/get-image-sizes.js","redux/notes-reducer.js","components/common/logo/index.js","components/common/logo/logo.js","components/common/choose-color/choose-color.js","components/common/click-icon/index.js","components/common/click-icon/click-icon.js","components/common/input-file/input-file.js","components/common/fix-mark/fix-mark.js","components/common/note-bottom-panel/note-bottom-panel.js","components/common/note-bottom-panel/index.js","components/header/header.js","components/header/index.js","components/common/panel-title/index.js","components/common/panel-title/panel-title.js","components/common/fix-mark/index.js","components/common/add-btn/add-btn.js","components/common/add-btn/index.js","utils/set-img-preview.js","components/common/picture-preview/index.js","components/common/picture-preview/picture-preview.js","components/common/picture-preview-box/index.js","components/common/picture-preview-box/picture-preview-box.js","components/common/note-panel/index.js","components/common/note-panel/note-panel.js","components/common/list/todo-list-item/index.js","components/common/list/todo-list-item/todo-list-item.js","components/common/list/list-items/list-items.js","components/common/list/list-items/index.js","components/common/list/form/index.js","components/common/list/form/form.js","components/common/list/list.js","components/common/list/index.js","components/add-notes-panel/list-note-panel/index.js","components/add-notes-panel/list-note-panel/list-note-panel.js","utils/validateTextFields.js","components/add-notes-panel/note-panel-view/index.js","components/add-notes-panel/note-panel-view/note-panel-view.js","components/add-notes-panel/default-panel/index.js","components/add-notes-panel/default-panel/default-panel.js","hoc/with-outside-alerter.js","components/add-notes-panel/add-notes-panel.js","components/modal-box/modal-box.js","components/modal-box/index.js","components/note-preview/modal-container/modal-container.js","components/note-preview/simple-note-preview/simple-note-preview.js","components/note-preview/simple-note-preview/index.js","components/note-preview/list-note-preview/list-note-preview.js","components/common/spinner/spinner.js","components/common/img-box/img-box.js","components/common/img-height-loader/img-height-loader.js","components/note-preview/note-preview.js","components/note-preview/index.js","components/common/spinner/index.js","components/all-notes/index.js","components/all-notes/all-notes.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","components/app/index.js","components/app/app.js","redux/store.js","index.js","components/add-notes-panel/note-panel-view/note-panel-view.module.scss","components/add-notes-panel/default-panel/default-panel.module.scss","components/note-preview/simple-note-preview/simple-note-preview.module.scss"],"names":["module","exports","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","firestore","settings","timestampsInSnapshots","storage","getImgSizes","input","callback","image","files","_URL","window","URL","webkitURL","imageInstance","Image","onload","imgWidth","this","width","imgHeight","height","src","createObjectURL","defaultNodeProps","time","Date","initialState","markNotes","addMarkNote","payload","type","addImage","id","dispatch","getState","getFirestore","name","getTime","split","pop","genImageName","endFunc","ref","put","on","snapshot","error","alert","message_","putImage","imgName","child","getDownloadURL","then","url","updateNote","setImage","addItem","note","newNote","collection","add","undefined","catch","err","delNote","notes","filter","item","length","delImg","delete","doc","console","log","obj","update","notesReducer","state","action","index","findIndex","push","splice","Logo","className","style","logo","logoIcon","logoName","ChooseColor","isShowList","onMouseEnter","setState","onMouseLeave","getColors","map","i","borderColor","currentColor","props","key","cn","listItem","backgroundColor","onClick","e","stopPropagation","getColor","mark","getList","box","position","positionTopLeft","list","chooseColor","title","Component","ClickIcon","tooltipText","clickIcon","data-tip","children","place","effect","InputFile","uploadFile","onChange","inputClone","target","cloneNode","onChangeFile","FixMark","checkMark","check","textMark","fixMark","NoteBottomPanel","showPanels","panels","icon","onClickDelNoteBtn","onClickCreateCloneBtn","addImg","onClickFixMark","noteBottomClass","noteBottomPanel","Header","yyyyyy","removeAllMarkNote","getForAllNotes","f","changeColor","bgColor","forEach","el","cloneNote","addNote","fixMarkValue","find","deleteAllNote","header","headerNotice","noticeContainer","headerNoticeMain","noticeTitle","main","compose","connect","deleteNote","firestoreConnect","PanelTitle","textarea","React","createRef","value","onTitleChange","currentTarget","getTitle","autosize","current","textareaClass","panelTitle","placeholder","addBtn","baseBtn","btn","role","text","setImgPreview","reader","FileReader","result","readAsDataURL","PicturePreview","picture","prevProps","prevState","pictureBox","img","alt","PicturePreviewBox","onDelete","picturePreview","deleteIcon","notePanel","getText","activateEditMode","editMode","TodoListItem","focus","onDeleteTodoListItem","checkbox","onChangeTextField","onClickCompletedCheckbox","liClasses","active","checkboxMark","closeBtn","ListItems","items","viewMode","array","Form","onChangeInputText","onChangeForm","form","formInput","List","itemId","lists","createTodoItem","inputId","listsCopy","idx","slice","returningItems","addTodoItem","todoList","ListNotePanel","listWrap","validateTextFields","replace","NotePanelView","progress","onClickAddBtn","setInput","setData","validField","view","bottomPanel","bottomPanelBox","noteBottom","DefaultPanel","setPanelView","Fragment","listIcon","imgIcon","OutsideAlerter","View","setWrapperRef","bind","handleClickOutside","show","document","addEventListener","removeEventListener","node","wrapperRef","event","contains","hhhhh","AddNotesPanel","defaultNoteView","emptyField","changeView","dataObj","notesPanel","notesPanelWrap","ordered","customStyles","content","maxWidth","top","left","right","bottom","marginRight","transform","zIndex","padding","overflow","borderRadius","border","ModalBox","isOpen","overlayClassName","overlay","onRequestClose","ModalContainer","closeModal","inputTarget","modal","modalIsOpen","previewContent","modalWrap","date","moment","format","btns","SimpleNotePreview","onChangeText","onChangeTitle","isEmptyFields","modalTitle","ListNotePreview","Spinner","mainClasses","classes","cls","spinner","spinnerImg","svg","ImgBox","loader","calcHeight","onLoad","imgBox","onError","ImgHeightLoader","boxWidth","updateDimensions","offsetWidth","NotesPreview","onClickMark","replaceImage","bottomPanelPosition","paddingTop","notePreview","activeNote","openModal","notePreviewWrap","buildMain","NotePreview","AllNotes","masonryOptions","transitionDuration","imagesLoadedOptions","background","notesList","fixNotesList","getMasonry","npWrap","options","disableImagesLoaded","updateOnEachImageLoad","onLayoutComplete","sortNotes","sort","a","b","getNote","allNotes","fixNotesBox","notesListTitle","emptyNotesBox","ErrorBoundry","hasError","info","componentStack","App","app","reducers","combineReducers","firestoreReducer","store","createStore","applyMiddleware","thunk","withExtraArgument","getFirebase","reactReduxFirebase","fbConfig","reduxFirestore","Modal","setAppElement","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.9b614cb5.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"logo\":\"logo_logo__2wzac\",\"logoIcon\":\"logo_logoIcon__-1f5I\",\"logoName\":\"logo_logoName__1SeB_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"notesPanel\":\"add-notes-panel_notesPanel__2PvZk\",\"notesPanelWrap\":\"add-notes-panel_notesPanelWrap__3vGxa\",\"img\":\"add-notes-panel_img__1IMmn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"deleteIcon\":\"picture-preview-box_deleteIcon__3XRic\",\"pictureBox\":\"picture-preview-box_pictureBox__1VlEt\",\"picturePreview\":\"picture-preview-box_picturePreview__JV-Ly\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"form_form__VbASh\",\"formInput\":\"form_formInput__20PVr\",\"icon\":\"form_icon__17ICG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"list-note-preview_title__19oMh\",\"lists\":\"list-note-preview_lists__31e9C\",\"modalTitle\":\"list-note-preview_modalTitle__3kEWb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinner\":\"spinner_spinner__1fUKb\",\"small\":\"spinner_small__192s5\",\"big\":\"spinner_big__2ug0x\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"input-file_input__2UxNG\",\"uploadFile\":\"input-file_uploadFile__aLu6H\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fixMark\":\"fix-mark_fixMark__3VFm9\",\"check\":\"fix-mark_check__1eyTu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"textarea\":\"panel-title_textarea__zDjU0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"img\":\"picture-preview_img__jZr9U\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"notePanel\":\"note-panel_notePanel__1t2YI\",\"textarea\":\"note-panel_textarea__2rSeb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"listItem\":\"list-items_listItem__376Lu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imgBox\":\"img-box_imgBox__2xyMy\",\"img\":\"img-box_img__1mhY4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"app_main__3o5VZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"selectedMark\":\"note-preview_selectedMark__1dHjp\",\"main\":\"note-preview_main__2uq4N\",\"paddingTop\":\"note-preview_paddingTop__1Zijp\",\"paddingBottom\":\"note-preview_paddingBottom__1ouiZ\",\"NoteBottomPanel\":\"note-preview_NoteBottomPanel__24Sqr\",\"fixMark\":\"note-preview_fixMark__2jbx2\",\"notePreview\":\"note-preview_notePreview__2ljV2\",\"activeNote\":\"note-preview_activeNote__2AqOA\",\"active\":\"note-preview_active__136CD\",\"notePreviewWrap\":\"note-preview_notePreviewWrap__2FN0c\",\"absolute\":\"note-preview_absolute__mh4cn\",\"openModal\":\"note-preview_openModal__Tp6u9\",\"loader\":\"note-preview_loader__1Y0vb\"};","module.exports = __webpack_public_path__ + \"static/media/logo.d12c0d77.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"clickIcon\":\"click-icon_clickIcon__2kZmn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btn\":\"btn_btn__15QAj\",\"btn_gray\":\"btn_btn_gray__3lwGL\",\"btn_block\":\"btn_btn_block__fEyrw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btn\":\"add-btn_btn__1zID0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chooseColor\":\"choose-color_chooseColor__I3sn7\",\"title\":\"choose-color_title__2l2HI\",\"box\":\"choose-color_box__2SyYQ\",\"positionTopLeft\":\"choose-color_positionTopLeft__3f0FI\",\"positionBottomLeft\":\"choose-color_positionBottomLeft__2RU5b\",\"list\":\"choose-color_list__2opX-\",\"listItem\":\"choose-color_listItem__8sZiG\",\"mark\":\"choose-color_mark__2p12M\",\"currentColor\":\"choose-color_currentColor__1lMYL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"modal-box_overlay__3jRGs\"};","module.exports = __webpack_public_path__ + \"static/media/puff.13f271c7.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"emptyNotesBox\":\"all-notes_emptyNotesBox__3uzN7\",\"notesList\":\"all-notes_notesList__2NtRW\",\"npWrap\":\"all-notes_npWrap__tTnBd\",\"notesListTitle\":\"all-notes_notesListTitle__MB3wH\",\"fixNotesBox\":\"all-notes_fixNotesBox__3q5rl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"header_header__1c1q6\",\"headerNotice\":\"header_headerNotice__2J6bA\",\"noticeContainer\":\"header_noticeContainer__1zsPY\",\"headerNoticeMain\":\"header_headerNoticeMain__3X45Y\",\"noticeTitle\":\"header_noticeTitle__1V8CF\",\"main\":\"header_main__2l3h6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"noteBottomPanel\":\"note-bottom-panel_noteBottomPanel__1jQ6k\",\"icon\":\"note-bottom-panel_icon__1P3QP\",\"choose-color\":\"note-bottom-panel_choose-color__1mAVn\",\"icon_3\":\"note-bottom-panel_icon_3__2AHKh\",\"bgColorBox\":\"note-bottom-panel_bgColorBox__X58Mj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"listItem\":\"todo-list-item_listItem__1jPMX\",\"checkbox\":\"todo-list-item_checkbox__1S2Bp\",\"checkboxMark\":\"todo-list-item_checkboxMark__1NvYX\",\"input\":\"todo-list-item_input__2Y7QU\",\"closeBtn\":\"todo-list-item_closeBtn__2PQAX\",\"active\":\"todo-list-item_active__1l40O\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"img\":\"modal-container_img__XEWoW\",\"bottomPanelBox\":\"modal-container_bottomPanelBox__3ccMY\",\"bottomPanel\":\"modal-container_bottomPanel__XlKJV\",\"noteWrap\":\"modal-container_noteWrap__34lo5\",\"date\":\"modal-container_date__3DHwf\",\"fixMark\":\"modal-container_fixMark__3mInW\",\"icon\":\"modal-container_icon__16UJ4\",\"imageBox\":\"modal-container_imageBox__3zXBJ\",\"modalWrap\":\"modal-container_modalWrap__1rBBS\",\"btns\":\"modal-container_btns__13yGI\",\"cancelBtn\":\"modal-container_cancelBtn__22evz\"};","import firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport 'firebase/auth';\n\nimport 'firebase/storage';\n\n\nvar config = {\n  apiKey: \"AIzaSyAzzRGnQXaBoFF9uJnEXRmWPeg91_wSpMY\",\n  authDomain: \"keep-be68c.firebaseapp.com\",\n  databaseURL: \"https://keep-be68c.firebaseio.com\",\n  projectId: \"keep-be68c\",\n  storageBucket: \"keep-be68c.appspot.com\",\n  messagingSenderId: \"1046598729377\",\n  appId: \"1:1046598729377:web:43bcad6a311acbe1\"\n};\nfirebase.initializeApp(config);\nfirebase.firestore().settings({ timestampsInSnapshots: true });\n\nconst storage = firebase.storage();\n\nexport {\n  storage, firebase as default\n} ","const getImgSizes = (input, callback) => {\r\n  const image = input.files[0];\r\n\r\n  if (image) {\r\n    let _URL = window.URL || window.webkitURL;\r\n    let imageInstance = new Image();\r\n\r\n    imageInstance.onload = function() {\r\n      const imgWidth = this.width;\r\n      const imgHeight = this.height;\r\n\r\n      callback(imgWidth, imgHeight) \r\n    };\r\n\r\n    imageInstance.src = _URL.createObjectURL(image);\r\n  }\r\n}\r\n\r\nexport default getImgSizes;","import firebase from '../config/fbConfig'\r\nimport getImgSizes from '../utils/get-image-sizes'\r\n\r\n\r\n\r\nconst defaultNodeProps = {\r\n  time: +(new Date()),\r\n}\r\n\r\nlet initialState = {\r\n  markNotes: []\r\n};\r\n\r\nconst notesReducer = (state = initialState, action) => {\r\n  switch(action.type) {\r\n    case 'CLEAR_MARKNOTES': {\r\n      return { markNotes: [] }\r\n    }\r\n    case 'CLEAR_MARKNOTES': {\r\n      return { markNotes: [] }\r\n    }\r\n    case 'ADD_MARK_NOTE': {\r\n      const [...markNotes] = state.markNotes;\r\n      let item;\r\n      \r\n      const index = markNotes.findIndex(item => item.id === action.payload.id)\r\n      if (index === -1) {\r\n        markNotes.push(action.payload)\r\n      } else {\r\n        item = markNotes[index]\r\n        markNotes.splice(index, 1)\r\n      }\r\n\r\n      console.log(markNotes)\r\n  \r\n      return {\r\n          ...state,\r\n          markNotes\r\n      };\r\n    }\r\n    default:\r\n        return state;\r\n  }\r\n}\r\n\r\nexport const clearMarkNotes = () => {\r\n  return {\r\n    type: 'CLEAR_MARKNOTES'\r\n  }\r\n};\r\n\r\nexport const addMarkNote = (payload) => {\r\n  return {\r\n    type: 'ADD_MARK_NOTE',\r\n    payload\r\n  }\r\n};\r\n\r\nexport const removeAllMarkNote = () => {\r\n  return {\r\n    type: 'REMOVE_ALL_MARK_NOTES'\r\n  }\r\n}\r\n\r\nconst genImageName = image => {\r\n  return new Date().getTime() + \".\" + image.name.split('.').pop();\r\n}\r\n\r\nconst putImage = (storage, image, name, endFunc) => {\r\n  return storage.ref(`images/${name}`).put(image)\r\n          .on('state_changed', \r\n            (snapshot) => {}, \r\n            (error) => { alert(error.message_) }, \r\n            endFunc\r\n          );\r\n}\r\n\r\nconst setImage = (imgName, id, dispatch, getState, getFirestore, storage) => {\r\n  storage.ref('images').child(imgName).getDownloadURL()\r\n    .then(url => {\r\n      updateNote(id, {url, imgName})(dispatch, getState, {getFirestore})\r\n    })\r\n}\r\n\r\nexport const addImage = (image, id) => {\r\n  return (dispatch, getState, {getFirestore, storage}) => {\r\n    const name = genImageName(image);\r\n    \r\n    putImage(storage, image, name, () => {\r\n      setImage(name, id, dispatch, getState, getFirestore, storage)\r\n    });\r\n  }\r\n}\r\n\r\nexport const addItem = (note, image) => {\r\n  return (dispatch, getState, {getFirestore, storage}) => {\r\n    let newNote = {\r\n      ...defaultNodeProps,\r\n      ...note\r\n    }\r\n\r\n    const firestore = getFirestore();\r\n    firestore.collection('notes').add(newNote).then(({id}) => {\r\n      if (image !== undefined) {\r\n        addImage(image, id)(dispatch, getState, {getFirestore, storage});\r\n      }\r\n    }).catch(err => {\r\n      // dispatch({ type: 'CREATE_PROJECT_ERROR' }, err);\r\n    });\r\n  }\r\n};\r\n\r\nexport const delNote = (note, notes) => {\r\n  return (dispatch, getState, {getFirestore, storage}) => {\r\n\r\n    if (note.imgName) {\r\n      let matchesArr = notes.filter(item => item.imgName === note.imgName);\r\n\r\n\r\n      if (matchesArr.length < 2) {\r\n        delImg(note, storage)\r\n      }\r\n    }\r\n  \r\n    const firestore = getFirestore();\r\n    firestore.delete({ collection: 'notes', doc: note.id });\r\n  }\r\n};\r\n\r\nexport const delImg = (note, callback = () => {}) => {\r\n  return (dispatch, getState, {getFirestore, storage}) => {\r\n    updateNote(note.id, {url: null, imgName: null})(dispatch, getState, {getFirestore});\r\n    \r\n    storage.ref(`images/${note.imgName}`).delete().then(function() {\r\n        callback()\r\n    }).catch(function(error) {\r\n      console.log(storage)\r\n    });\r\n  }\r\n}\r\n\r\nexport const replaceImage = (note, input) => {\r\n  return (dispatch, getState, {getFirestore, storage}) => {\r\n    const {id} = note;\r\n\r\n    delImg(note, () => {\r\n      getImgSizes(input, (imgWidth, imgHeight) => {\r\n        updateNote(id, {imgWidth, imgHeight})(dispatch, getState, {getFirestore});\r\n        addImage(input.files[0], id)(dispatch, getState, {getFirestore, storage});\r\n      })\r\n    })(dispatch, getState, {getFirestore, storage})\r\n  }\r\n}\r\n\r\nexport const deleteAllNote = (notes) => {\r\n  return (dispatch, getState, {getFirestore, storage}) => {\r\n    dispatch(clearMarkNotes())\r\n    notes.forEach(note => {\r\n      delNote(note, notes)(dispatch, getState, {getFirestore, storage})\r\n    })\r\n  }\r\n};\r\n\r\nexport const updateNote = (id, obj) => {\r\n  return (dispatch, getState, {getFirestore}) => {\r\n    const firestore = getFirestore();\r\n    firestore.update({ collection: 'notes', doc: id }, obj)\r\n  }\r\n};\r\n\r\nexport const deleteField = (id, field) => {\r\n  return (dispatch, getState, {getFirestore}) => {\r\n    const firestore = getFirestore();\r\n    // firestore.update({ collection: 'notes', doc: id }, obj)\r\n\r\n    let cityRef = firestore.collection('notes').doc(id);\r\n\r\n    // Remove the 'capital' field from the document\r\n    let removeCapital = cityRef.update({\r\n      [field]: firebase.firestore.FieldValue.delete()\r\n    });\r\n\r\n    console.log(removeCapital)\r\n  }\r\n};\r\n\r\n\r\nexport default notesReducer;","import Logo from './logo';\n\nexport default Logo;\n","import React from 'react';\nimport logo from './logo.png';\nimport style from './logo.module.scss'\n\n\nconst Logo = () => {\n  return (\n    <div className={style.logo}>\n      <div className={style.logoIcon}>\n        <img src={logo} className=\"img-fluid\" />\n      </div>\n      <div className={style.logoName}>Keep clone</div>\n    </div>\n  )\n}\n\nexport default Logo;","import React, {Component} from 'react'\r\nimport style from './choose-color.module.scss';\r\nimport cn from 'classnames';\r\n\r\n\r\nexport default class ChooseColor extends Component {\r\n  state = {\r\n    isShowList: false\r\n  }\r\n\r\n  onMouseEnter = () => {\r\n    this.setState({\r\n      isShowList: true\r\n    })\r\n  }\r\n\r\n  onMouseLeave = () => {\r\n    this.setState({\r\n      isShowList: false\r\n    })\r\n  }\r\n  \r\n\r\n  getColors = () => {\r\n    let colors = ['#ffffff', '#f28b82', '#fbbc04', '#fff475', '#ccff90', '#a7ffeb', '#cbf0f8', '#aecbfa', '#d7aefb', '#fdcfe8', '#e6c9a8', '#e8eaed'];\r\n\r\n    return colors.map((item, i) => {\r\n      let borderColor = item;\r\n      let currentColor = null;\r\n\r\n      if (this.props.currentColor === item) currentColor = style.currentColor\r\n      if (i === 0) borderColor = '#eee'\r\n      \r\n      return <li key={item} className={cn(style.listItem, currentColor)} \r\n                  style={{backgroundColor: item, borderColor}} \r\n                  onClick={e => {\r\n                    e.stopPropagation()\r\n                    this.props.getColor(item)\r\n                  }}>\r\n                {currentColor && (\r\n                  <i className={cn(\"fas fa-check\", style.mark)}></i>\r\n                )}\r\n             </li>\r\n    });\r\n  }\r\n\r\n  getList = () => {\r\n    \r\n    return this.state.isShowList &&\r\n            <div className={cn(style.box, this.props.position ? style[this.props.position] : style.positionTopLeft)}>\r\n              <ul className={style.list}>\r\n                {this.getColors()}\r\n              </ul>\r\n            </div>\r\n  }\r\n\r\n  render() {\r\n    \r\n\r\n    return (\r\n      <div className={style.chooseColor} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\r\n        <span className={style.title}>\r\n          <i className=\"fas fa-palette\"></i>\r\n        </span>\r\n        {this.getList()}\r\n      </div>\r\n    )\r\n  }\r\n}","import ClickIcon from './click-icon';\r\n\r\nexport default ClickIcon;\r\n","import React, {Component} from 'react'\r\nimport style from './click-icon.module.scss'\r\nimport ReactTooltip from 'react-tooltip'\r\n\r\n\r\nconst ClickIcon = props => {\r\n  const onClick = e => {\r\n    e.stopPropagation();\r\n    props.onClick()\r\n  }\r\n\r\n  const {tooltipText} = props;\r\n\r\n  return (\r\n    <div className={style.clickIcon} onClick={onClick} data-tip={tooltipText} >\r\n      {props.children}\r\n      <ReactTooltip place=\"bottom\" type=\"dark\" effect=\"solid\" />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ClickIcon","import React, {Component} from 'react'\r\nimport style from './input-file.module.scss';\r\nimport classNames from 'classnames';\r\nimport ReactTooltip from 'react-tooltip'\r\n\r\n\r\nconst InputFile = props => {\r\n  const onChangeFile = e => {\r\n    const input = e.target;\r\n    // always need to create new objects for the difference in arrays input.files[0]\r\n    const inputClone = input.cloneNode(true);\r\n\r\n    if (inputClone.files[0]) props.onChangeFile(inputClone)\r\n  }\r\n\r\n  const {tooltipText} = props;\r\n\r\n  return (\r\n    <div data-tip={tooltipText} onClick={e => e.stopPropagation()}>\r\n      <label className={style.uploadFile}>\r\n        {props.children}\r\n        <input className={style.input} type=\"file\" onChange={onChangeFile}  />\r\n        {tooltipText && <ReactTooltip place=\"bottom\" type=\"dark\" effect=\"solid\"/>}\r\n      </label>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default InputFile;","import React, {Component} from 'react'\r\nimport style from './fix-mark.module.scss'\r\nimport ReactTooltip from 'react-tooltip'\r\nimport cn from 'classnames'\r\n\r\n\r\nconst FixMark = props => {\r\n  const checkMark = props.check ? style.check : '';\r\n  const textMark = props.check ? 'Открепить' : 'Закрепить'\r\n\r\n  const onClick = e => {\r\n    e.stopPropagation();\r\n    props.onClick()\r\n  }\r\n\r\n  return (\r\n    <div className={cn(style.fixMark, checkMark)} onClick={onClick} data-tip={textMark} >\r\n      <i className=\"fas fa-thumbtack\"></i>\r\n      <ReactTooltip place=\"bottom\" type=\"dark\" effect=\"solid\"/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default FixMark","import React, {Component} from 'react'\r\nimport style from './note-bottom-panel.module.scss'\r\nimport ChooseСolor from '../choose-color/choose-color'\r\nimport ClickIcon from '../click-icon'\r\nimport ReactTooltip from 'react-tooltip'\r\nimport InputFile from '../input-file/input-file'\r\nimport FixMark from '../fix-mark/fix-mark'\r\nimport cn from 'classnames'\r\n\r\n\r\nconst NoteBottomPanel = props => {\r\n\r\n  const showPanels = props.panels.map(item => {\r\n    switch (item.name) {\r\n      case 'color' :\r\n        const {position, getColor, currentColor} = item;\r\n        const props = {position, getColor, currentColor};\r\n\r\n        return (\r\n          <div key={item.name} className={style.icon} data-tip=\"Изменить цвет\">\r\n            <ChooseСolor {...props} />\r\n          </div>\r\n        )\r\n      case 'delNote' :\r\n        const {onClickDelNoteBtn} = item;\r\n\r\n        return (\r\n          <div key={item.name} className={style.icon}>\r\n            <ClickIcon tooltipText=\"Удалить заметку\" onClick={onClickDelNoteBtn}>\r\n              <i className=\"far fa-trash-alt\"></i>\r\n            </ClickIcon>\r\n          </div>\r\n        )\r\n      case 'createClone' :\r\n        const {onClickCreateCloneBtn} = item;\r\n\r\n        return (\r\n          <div key={item.name} className={style.icon}>\r\n            <ClickIcon tooltipText=\"Создать Копию\" onClick={onClickCreateCloneBtn}>\r\n              <i className=\"far fa-clone\"></i>\r\n            </ClickIcon>\r\n          </div>\r\n        )\r\n      case 'addImg' :\r\n        const {addImg} = item;\r\n\r\n        return (\r\n          <div key={item.name} className={style.icon} data-tip=\"Добавить картинку\">\r\n            <InputFile onChangeFile={addImg}>\r\n              <i className=\"far fa-image\" />\r\n            </InputFile>\r\n          </div>\r\n        )\r\n      case 'fixMark' :\r\n        const {fixMark, onClickFixMark} = item;\r\n\r\n        return (\r\n          <div key={item.name} className={style.icon}>\r\n            <FixMark check={fixMark} onClick={onClickFixMark} />\r\n          </div>\r\n        )\r\n    }\r\n  })\r\n\r\n  const noteBottomClass = props.noteBottomClass ? props.noteBottomClass : ''\r\n\r\n  return (\r\n    <div className={cn(style.noteBottomPanel, noteBottomClass)} >\r\n      {showPanels}\r\n      <ReactTooltip place=\"bottom\" type=\"dark\" effect=\"solid\"/>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\nexport default NoteBottomPanel;","import NoteBottomPanel from './note-bottom-panel';\r\n\r\nexport default NoteBottomPanel;\r\n","import React, {Component} from 'react'\r\nimport {connect} from 'react-redux';\r\nimport {addMarkNote, delNote, deleteAllNote, updateNote, clearMarkNotes, addItem} from '../../redux/notes-reducer'\r\nimport { compose } from 'redux'\r\nimport { firestoreConnect } from 'react-redux-firebase'\r\nimport Logo from '../common/logo'\r\nimport style from './header.module.scss'\r\nimport NoteBottomPanel from '../common/note-bottom-panel';\r\nimport cn from 'classnames'\r\n\r\n\r\n\r\nclass Header extends Component {\r\n\r\n  yyyyyy = () => {\r\n    this.props.removeAllMarkNote()\r\n  }\r\n\r\n  getForAllNotes = f => {\r\n    // this.props.markNotes.forEach(el => {\r\n    //   f()\r\n    // })\r\n  }\r\n\r\n  changeColor = bgColor => {\r\n    this.props.markNotes.forEach(el => {\r\n      this.props.updateNote(el.id, {bgColor})\r\n    })\r\n    // this.getForAllNotes((this.props.updateNote )\r\n    // \r\n  }\r\n\r\n  cloneNote = () => {\r\n    this.props.markNotes.forEach(el => {\r\n      let {...note} = el;\r\n      delete note.id\r\n\r\n      this.props.addNote(note)\r\n    })\r\n  }\r\n  \r\n  render() {\r\n    const {markNotes} = this.props;\r\n\r\n    const fixMarkValue = markNotes.find(item => item.fixMark) ? true : false\r\n\r\n    const onClickFixMark = () => {\r\n      markNotes.forEach(el => {\r\n        this.props.updateNote(el.id, {fixMark: !fixMarkValue})\r\n      })\r\n    }\r\n    \r\n    const panels = [\r\n      {\r\n        name: 'fixMark',\r\n        fixMark: () => fixMarkValue,\r\n        onClickFixMark: () => onClickFixMark(),\r\n      }, {\r\n        name: 'color',\r\n        position: 'positionBottomLeft',\r\n        getColor: this.changeColor,\r\n      }, {\r\n        name: 'delNote',\r\n        onClickDelNoteBtn: () => this.props.deleteAllNote(this.props.markNotes),\r\n      }, {\r\n        name: 'createClone',\r\n        onClickCreateCloneBtn: () => this.cloneNote(),\r\n      }\r\n    ]\r\n    \r\n    return (\r\n      <div className={style.header}>\r\n        {(markNotes.length > 0) && (\r\n          <div className={style.headerNotice}>\r\n            <div className={cn('container', style.noticeContainer)}>\r\n              <div className={style.headerNoticeMain}>\r\n                <div onClick={this.yyyyyy}>\r\n                  <i className=\"fas fa-times\"></i>\r\n                </div>\r\n                <div className={style.noticeTitle}>Выбрана {markNotes.length} заметка</div>\r\n                <NoteBottomPanel panels={panels} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n        <div className=\"container\">\r\n          <div className={style.main}>\r\n            <Logo />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    markNotes: state.notesReducer.markNotes,\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    addMarkNote: id => dispatch(addMarkNote(id)),\r\n    deleteNote: (note) => dispatch(delNote(note)),\r\n    removeAllMarkNote: () => dispatch(clearMarkNotes()),\r\n    deleteAllNote: (notes) => dispatch(deleteAllNote(notes)),\r\n    updateNote: (id, obj) => dispatch(updateNote(id, obj)),\r\n    addNote: (item) => dispatch(addItem(item)),\r\n  }\r\n}  \r\n\r\nexport default compose(\r\n  connect(mapStateToProps, mapDispatchToProps),\r\n  firestoreConnect([\r\n    { collection: 'projects' },\r\n    { collection: 'notes' }\r\n  ])\r\n)(Header)\r\n\r\n","import Header from './header';\r\n\r\nexport default Header;\r\n","import PanelTitle from './panel-title';\r\n\r\nexport default PanelTitle;\r\n","import React, {Component} from 'react'\r\nimport cn from 'classnames'\r\nimport autosize from 'autosize'\r\nimport style from './panel-title.module.scss'\r\n\r\nexport default class PanelTitle extends Component {\r\n  textarea = React.createRef();\r\n\r\n  state = {\r\n    title: this.props.value || '',\r\n  }\r\n\r\n  componentDidMount() {\r\n    autosize(this.textarea.current);\r\n  }\r\n\r\n  onTitleChange = (e) => {\r\n    this.setState({title: e.currentTarget.value});\r\n    this.props.getTitle(e.currentTarget.value)\r\n  }\r\n\r\n  render() {\r\n    // const mainClasses = props.classes ? props.classes.map(cls => style[cls]) : [];\r\n    const textareaClass = this.props.textareaClass ? this.props.textareaClass : ''\r\n\r\n    return (\r\n      <div className={style.panelTitle}>\r\n        <textarea className={cn(style.textarea, this.props.textareaClass)}\r\n                  onChange={this.onTitleChange} \r\n                  value={this.state.title} \r\n                  placeholder=\"Заголовок\" \r\n                  ref={this.textarea} />\r\n      </div>\r\n    )\r\n  }\r\n}","import FixMark from './fix-mark';\r\n\r\nexport default FixMark;\r\n","import React, {Component} from 'react'\r\nimport baseBtn from '../../../styles/btn.module.scss'\r\nimport style from './add-btn.module.scss'\r\n\r\n\r\nconst addBtn = props => {\r\n  return (\r\n    <div className={`${baseBtn.btn} ${style.btn}`} role=\"button\" onClick={props.onClick}>\r\n      {props.text}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default addBtn","import addBtn from './add-btn';\r\n\r\nexport default addBtn;\r\n","const setImgPreview = (input, callback) => {\r\n\r\n  if (input.files && input.files[0]) {\r\n    var reader = new FileReader();\r\n\r\n    let $this = this;\r\n\r\n    reader.onload = function (e) {\r\n      callback(e.target.result);\r\n    };\r\n\r\n    reader.readAsDataURL(input.files[0]);\r\n  }\r\n}\r\n\r\nexport default setImgPreview;","import PicturePreview from './picture-preview';\r\n\r\nexport default PicturePreview;\r\n","import React, {Component} from 'react'\r\nimport setImgPreview from '../../../utils/set-img-preview'\r\nimport cn from 'classnames'\r\nimport style from './picture-preview.module.scss'\r\n\r\n\r\nclass PicturePreview extends Component {\r\n  state = {\r\n    picture: null\r\n  }\r\n\r\n  componentDidMount() {\r\n    const {input} = this.props;\r\n    if (typeof input === \"string\" ) this.setState({picture: input})\r\n    else this.setImgPreview(input)\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    \r\n    if (prevProps.input === null && this.props.input) {\r\n        this.setImgPreview(this.props.input)\r\n    }\r\n\r\n    if ((prevProps.input !== null) && (typeof this.props.input !== \"string\")) {\r\n      // debugger\r\n      // if (prevProps.input.files[0] !== this.props.input.files[0]) {\r\n        this.setImgPreview(this.props.input)\r\n      // }\r\n    }\r\n  }\r\n\r\n  setImgPreview = (input) => {\r\n    setImgPreview(input, (picture) => {\r\n      this.setState({picture})\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={style.pictureBox}>\r\n        {this.state.picture && (\r\n          <div>\r\n            <img className={cn('img-fluid', style.img)} \r\n                  src={this.state.picture} \r\n                  alt=\"Uploaded images\" />\r\n          </div>\r\n        )}\r\n        {/* {this.state.picture === null && <Spinner />} */}\r\n      </div>\r\n      )\r\n  }\r\n}\r\n\r\nexport default PicturePreview","import PicturePreviewBox from './picture-preview-box';\r\n\r\nexport default PicturePreviewBox;\r\n","import React, {Component} from 'react'\r\nimport cn from 'classnames'\r\nimport PicturePreview from '../picture-preview'\r\nimport ClickIcon from '../click-icon'\r\nimport style from './picture-preview-box.module.scss'\r\n\r\n\r\nconst PicturePreviewBox = ({input, onDelete}) => {\r\n  return (    \r\n    <div className={style.pictureBox}>\r\n      {input && (\r\n        <div className={style.picturePreview}>\r\n          <PicturePreview input={input} />\r\n        </div>\r\n      )}\r\n      <div className={style.deleteIcon}>\r\n        <ClickIcon onClick={onDelete} tooltipText=\"Удалить картинку\">\r\n          <i className=\"far fa-trash-alt\" />\r\n        </ClickIcon>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PicturePreviewBox","import notePanel from './note-panel';\r\n\r\nexport default notePanel;\r\n","import React, {Component} from 'react'\r\nimport style from './note-panel.module.scss'\r\nimport autosize from 'autosize'\r\n\r\nclass notePanel extends Component {\r\n  input = React.createRef();\r\n\r\n  state = {\r\n    value: this.props.value || '',\r\n  }\r\n\r\n  componentDidMount() {\r\n    autosize(this.input.current);\r\n  }\r\n  \r\n  onChange = e => {\r\n    this.setState({value: e.currentTarget.value});\r\n    this.props.getText(e.currentTarget.value)\r\n  }\r\n\r\n  deactivateEditMode() {\r\n    this.setState( {\r\n      editMode: false\r\n    });\r\n  }\r\n\r\n  activateEditMode = () => {\r\n    this.setState( {\r\n      editMode: true\r\n    } );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={style.notePanel}>\r\n        <textarea className={style.textarea} \r\n                type=\"text\" value={this.state.value} \r\n                placeholder={this.props.placeholder || \"Заметка\"}\r\n                onChange={this.onChange} \r\n                ref={this.input} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default notePanel;","import TodoListItem from './todo-list-item';\r\n\r\nexport default TodoListItem;\r\n","import React, {Component} from 'react'\r\nimport cn from 'classnames'\r\nimport style from './todo-list-item.module.scss'\r\n\r\n\r\n\r\nclass ListItem extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.input = React.createRef();\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.focus) {\r\n      this.input.current.focus();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { value, checkbox, \r\n            onDeleteTodoListItem, onChangeTextField, onClickCompletedCheckbox} = this.props;\r\n    let liClasses = cn(style.listItem, [(this.props.className || ''), (this.props.checkbox ? style.active : '')]);\r\n\r\n    // if ( this.props.checkbox ) liClasses += className(liClasses, style.acitve);\r\n\r\n    \r\n    return (\r\n      <li className={ liClasses}>\r\n        <div className={style.checkbox}\r\n             onClick={onClickCompletedCheckbox} >\r\n          <i className={cn(\"fas fa-check\", style.checkboxMark)}></i>\r\n        </div>\r\n        <input className={style.input}\r\n               type=\"text\"\r\n               value={ value }\r\n               onChange={ (e) => onChangeTextField(e.target.value) }\r\n               ref={ this.input } \r\n            />\r\n        <div className={style.closeBtn} \r\n           onClick={ onDeleteTodoListItem } >\r\n            <i className=\"fas fa-times\"></i>\r\n        </div>\r\n      </li>\r\n    );\r\n  }                           \r\n}\r\n\r\nexport default ListItem;","import React, {Component} from 'react'\r\nimport TodoListItem from '../todo-list-item'\r\nimport style from './list-items.module.scss'\r\n\r\n\r\nconst ListItems = props => {\r\n  // const { items, \r\n  //   onDeleteTodoListItem, onClickCompletedCheckbox, onChangeTextField \r\n  // } = props;\r\n  const { items,  onChangeTextField, onClickCompletedCheckbox, onDeleteTodoListItem } = props;\r\n\r\n  const todoListItems = () => {\r\n    if (props.viewMode && props.viewMode === \"only-view\") {\r\n      return items.map((item, index, array) => {\r\n        \r\n        return <TodoListItem  key={item.id}\r\n                              id={item.id} \r\n                              value={item.value} \r\n                              checkbox={item.checkbox}\r\n                              onDeleteTodoListItem={ () => {} }\r\n                              onChangeTextField={ () => {} }\r\n                              onClickCompletedCheckbox={ () => {} }  \r\n                              focus={false} \r\n                              className={style.listItem} \r\n                              />\r\n      });\r\n\r\n    } else {\r\n      return items.map((item, index, array) => {\r\n        const focus = (index === (array.length - 1)) ? true : false;\r\n        \r\n        return <TodoListItem  key={item.id}\r\n                              id={item.id} \r\n                              value={item.value} \r\n                              checkbox={item.checkbox}\r\n                              onDeleteTodoListItem={ () => { onDeleteTodoListItem(item.id) } }\r\n                              onChangeTextField={ (value) => onChangeTextField(item.id, value)  }\r\n                              onClickCompletedCheckbox={ () => onClickCompletedCheckbox(item.id)  }\r\n                              focus={focus} \r\n                              className={style.listItem}\r\n                              />\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  return <ul className={`list-items ${props.className}`} > { todoListItems() } </ul>\r\n}\r\n\r\nexport default ListItems;","import ListItems from './list-items';\r\n\r\nexport default ListItems;\r\n","import Form from './form';\r\n\r\nexport default Form;\r\n","import React, {Component} from 'react'\r\n// import {connect} from 'react-redux';\r\n// import {addNote} from '../../redux/notes-reducer'\r\n// import BottomPanel from './../bottom-panel';\r\nimport style from './form.module.scss'\r\n\r\n\r\n\r\n\r\nclass Form extends React.Component {\r\n  state = {\r\n    value: \"\"\r\n  }\r\n\r\n  onChangeInputText = (e) => {\r\n    this.props.onChangeForm(e.target.value);\r\n    this.setState({ value: \"\" });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={style.form}>\r\n        <div className={style.icon}>\r\n          <i className=\"fas fa-plus\" />\r\n        </div>\r\n        <input type=\"text\" className={style.formInput} placeholder=\"Новый пункт\" \r\n               value={ this.state.value}\r\n               onChange={ this.onChangeInputText }/>\r\n      </div>\r\n    );   \r\n  }                        \r\n}\r\n\r\nexport default Form;","import React, {Component} from 'react'\r\nimport ListItems from './list-items'\r\nimport Form from './form'\r\nimport style from './list.module.scss'\r\n\r\nexport default class List extends Component {\r\n  state = {\r\n    itemId: 1,\r\n    lists: [],\r\n  }\r\n\r\n  componentDidMount() {\r\n    const lists = this.props.lists;\r\n\r\n    if (lists) {\r\n      const itemId = lists[lists.length - 1].id + 1;\r\n\r\n      this.setState({lists, itemId})\r\n    }\r\n  }\r\n\r\n  createTodoItem = (value = \"\") => {\r\n    return {\r\n      id: this.state.itemId++, \r\n      value: value, \r\n      checkbox: false,\r\n    }\r\n  }\r\n  \r\n  onChangeTextField = (inputId, value) => {\r\n    this.setState((state) => {\r\n      const [...listsCopy] = state.lists;\r\n      const idx =  listsCopy.findIndex((item) => item.id === inputId);\r\n      const lists = [\r\n        ...listsCopy.slice(0, idx),\r\n        {\r\n          ...listsCopy[idx],\r\n          value\r\n        },\r\n        ...listsCopy.slice(idx + 1)\r\n      ];\r\n\r\n      this.props.returningItems(lists);\r\n\r\n      return { lists };\r\n    });\r\n  }\r\n\r\n  onClickCompletedCheckbox = (id) => {\r\n    this.setState((state) => {\r\n      const [...listsCopy] = state.lists;\r\n      const idx = listsCopy.findIndex((item) => item.id === id);\r\n      const lists = [\r\n        ...listsCopy.slice(0, idx),\r\n        {\r\n          ...listsCopy[idx],\r\n          checkbox: !listsCopy[idx].checkbox\r\n        },\r\n        ...listsCopy.slice(idx + 1)\r\n      ];\r\n\r\n      this.props.returningItems(lists);\r\n      \r\n      return { lists };\r\n    });\r\n  }\r\n\r\n  onDeleteTodoListItem = id => {\r\n    this.setState((state) => {\r\n      const idx = state.lists.findIndex((item) => item.id === id);\r\n      const lists = [\r\n        ...state.lists.slice(0, idx),\r\n        ...state.lists.slice(idx + 1)\r\n      ]\r\n      \r\n      this.props.returningItems(lists);\r\n\r\n      return { lists };\r\n    });\r\n  }\r\n\r\n  addTodoItem = (value) => {\r\n    this.setState((state) => {\r\n      const lists = [\r\n        ...state.lists,\r\n        this.createTodoItem(value)\r\n      ];\r\n\r\n      this.props.returningItems(lists)\r\n\r\n      return { lists }\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={style.todoList}>\r\n        <ListItems items={this.state.lists}\r\n                   onChangeTextField={this.onChangeTextField}\r\n                    onClickCompletedCheckbox={ this.onClickCompletedCheckbox } \r\n                   onDeleteTodoListItem={ this.onDeleteTodoListItem } /> \r\n        <Form onChangeForm={this.addTodoItem} />\r\n      </div>\r\n    )\r\n  }\r\n}","import List from './list';\r\n\r\nexport default List;\r\n","import ListNotePanel from './list-note-panel';\r\n\r\nexport default ListNotePanel;\r\n","import React, {Component} from 'react'\r\nimport List from '../../common/list'\r\nimport style from './list-note-panel.module.scss'\r\n\r\n\r\nconst ListNotePanel = ({getList}) => {\r\n  \r\n  const returningItems = lists => getList({ lists });\r\n\r\n  return (\r\n    <div className={style.listWrap}>\r\n      <List returningItems={returningItems} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ListNotePanel;","const validateTextFields = (text) => {\r\n  if (text.length === 0 || text.replace(/\\s/g,'') == '') {\r\n    return null\r\n  }\r\n\r\n  return text;\r\n}\r\n\r\nexport default validateTextFields;","import NotePanelView from './note-panel-view';\r\n\r\nexport default NotePanelView;\r\n","import React, {Component} from 'react'\r\nimport NoteBottomPanel from '../../common/note-bottom-panel';\r\nimport PanelTitle from '../../common/panel-title'\r\nimport FixMark from '../../common/fix-mark'\r\nimport AddBtn from '../../common/add-btn'\r\nimport PicturePreviewBox from '../../common/picture-preview-box'\r\nimport NotePanel from './../../common/note-panel'\r\nimport ListNotePanel from './../list-note-panel'\r\nimport getImgSizes from '../../../utils/get-image-sizes'\r\nimport validateTextFields from '../../../utils/validateTextFields'\r\nimport style from './note-panel-view.module.scss'\r\n\r\n\r\nclass NotePanelView extends Component {\r\n  state = {\r\n    progress: 0,\r\n    currentColor: '#ffffff',\r\n    note: {\r\n      fixMark: false,\r\n    },\r\n  }\r\n  \r\n  onClickFixMark = () => {\r\n    this.setState(state => {\r\n      return {\r\n        note: {\r\n          ...state.note,\r\n          fixMark: !state.note.fixMark\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  onClickAddBtn = () => {\r\n    const input = this.props.input;\r\n\r\n    if (input) {\r\n      getImgSizes(input, (imgWidth, imgHeight) => {\r\n        this.setState(state => {\r\n          const note = {\r\n            ...state.note,\r\n            imgWidth, imgHeight\r\n          }\r\n\r\n          this.props.onClickAddBtn(note)\r\n        })\r\n      })\r\n    } else {\r\n      this.props.onClickAddBtn(this.state.note)\r\n    }  \r\n  }\r\n\r\n  onDelete = () => {\r\n    this.props.setInput(null)\r\n  }\r\n\r\n  getColor = currentColor => {\r\n    this.setState({\r\n      currentColor\r\n    })\r\n    this.props.setData({ bgColor: currentColor})\r\n  }\r\n\r\n  getTitle = title => {\r\n    const validField = validateTextFields(title);\r\n    const result = validField === null ? null : {title: validField};\r\n\r\n    this.props.setData(result);\r\n  }\r\n\r\n  getText = text => {\r\n    const validField = validateTextFields(text);\r\n    const result = validField === null ? null : {text: validField};\r\n\r\n    this.props.setData(result);\r\n  }\r\n\r\n  getList = list => {\r\n    if (list.length === 0) {\r\n      this.props.setData(null);\r\n    } else {\r\n      this.props.setData(list);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const panels = [\r\n      {\r\n        name: 'addImg',\r\n        addImg: (input) => this.props.setInput(input),\r\n      }, {\r\n        name: 'color',\r\n        currentColor: this.state.currentColor,\r\n        getColor: bgColor => this.getColor(bgColor),\r\n      },\r\n    ]\r\n\r\n    let children;\r\n\r\n    switch(this.props.view) {\r\n      case 'note' :\r\n        children = <NotePanel getText={this.getText} />\r\n        break;\r\n      case 'list' :\r\n        children = <ListNotePanel getList={this.getList} />\r\n        break;\r\n    }\r\n    \r\n    return (\r\n      <>\r\n        <PicturePreviewBox input={this.props.input} onDelete={this.onDelete} />\r\n        <PanelTitle getTitle={this.getTitle}\r\n                    textareaClass={style.title} />\r\n        <div className={style.fixMark}>\r\n          <FixMark check={this.state.note.fixMark} onClick={this.onClickFixMark} />\r\n        </div>\r\n\r\n        {children}\r\n\r\n        <div className={style.bottomPanel}>\r\n          <div className={style.bottomPanelBox}>\r\n            <NoteBottomPanel panels={panels}\r\n                            noteBottomClass={style.noteBottom} />\r\n          </div>\r\n          <AddBtn text=\"Добавить\" onClick={this.onClickAddBtn} />\r\n        </div>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nexport default NotePanelView;","import DefaultPanel from './default-panel';\r\n\r\nexport default DefaultPanel;\r\n","import React, {Component} from 'react'\r\nimport style from './default-panel.module.scss'\r\nimport ClickIcon from '../../common/click-icon'\r\nimport className from 'classnames'\r\nimport InputFile from '../../common/input-file/input-file'\r\n\r\n\r\nconst DefaultPanel = props => {\r\n  const { setPanelView } = props;\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className={style.textarea} onClick={() => setPanelView('note')} >\r\n        Заметка…\r\n      </div>\r\n      <div className={className(style.icon, style.listIcon)} onClick={() => setPanelView('list')} >\r\n        <ClickIcon tooltipText=\"Создать список\" \r\n                   onClick={() => setPanelView('list')}>\r\n          <i className=\"far fa-check-square\"></i>\r\n        </ClickIcon>\r\n      </div>\r\n      <div className={className(style.icon, style.imgIcon)}>\r\n        <InputFile onChangeFile={input => setPanelView('note', input)} \r\n                    tooltipText=\"Создать фотозаметку\">\r\n          <i className=\"far fa-image\" />\r\n        </InputFile>\r\n      </div>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default DefaultPanel;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\n\n\nconst OutsideAlerter = (View) => {\n  return class extends Component {\n    constructor(props) {\n      super(props);\n\n      this.setWrapperRef = this.setWrapperRef.bind(this);\n      this.handleClickOutside = this.handleClickOutside.bind(this);\n\n      this.state = {\n        show: true\n      }\n    }\n\n    componentDidMount() {\n      document.addEventListener('mousedown', this.handleClickOutside);\n    }\n\n    componentWillUnmount() {\n      document.removeEventListener('mousedown', this.handleClickOutside);\n    }\n\n    /**\n     * Set the wrapper ref\n     */\n    setWrapperRef(node) {\n      this.wrapperRef = node;\n    }\n\n    /**\n     * Alert if clicked on outside of element\n     */\n    handleClickOutside(event) {\n      if (this.wrapperRef && !this.wrapperRef.contains(event.target)) {\n        this.setState({show: false})\n      } else {\n        this.setState({show: true})\n      }\n    }\n\n    render() {\n      const { show } = this.state;\n      \n      return <View {...this.props} show={show} hhhhh={this.setWrapperRef} />\n    }\n    \n  };\n};\n\nexport default OutsideAlerter;\n","import React, {Component} from 'react'\r\nimport {connect} from 'react-redux';\r\nimport {addNote, addItem} from '../../redux/notes-reducer'\r\nimport style from './add-notes-panel.module.scss'\r\nimport { firestoreConnect } from 'react-redux-firebase'\r\nimport { compose } from 'redux'\r\nimport NotePanelView from './note-panel-view'\r\nimport DefaultPanel from './default-panel'\r\nimport OutsideAlerter from '../../hoc/with-outside-alerter'\r\nimport cn from 'classnames'\r\n\r\n\r\nclass AddNotesPanel extends Component {\r\n  defaultNoteView = {\r\n    bgColor: '#ffffff',\r\n  }\r\n\r\n  state = {\r\n    emptyField: true,\r\n    input: null,\r\n    view: '',\r\n    note: {\r\n      ...this.defaultNoteView\r\n    },\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props.show !== prevProps.show) {\r\n      this.setState(state => {\r\n        return {\r\n          emptyField: true,\r\n          input: null,\r\n          view: '',\r\n          note: {\r\n            ...this.defaultNoteView\r\n          },\r\n        }\r\n      })\r\n      this.changeView('')\r\n    }\r\n  }\r\n\r\n  onClickAddBtn = (note) => {    \r\n    if (!this.state.emptyField || this.state.input) {\r\n      let image;\r\n\r\n      if (this.state.input) {\r\n        image = this.state.input.files[0];\r\n      }\r\n\r\n      this.setState(state => {\r\n        let newNote = {\r\n          ...state.note,\r\n          ...note,\r\n          type: state.view\r\n        }\r\n  \r\n        this.props.addNote(newNote, image);\r\n  \r\n        newNote = {\r\n          ...this.defaultNoteView\r\n        }\r\n  \r\n        return { note: newNote }\r\n      });\r\n\r\n\r\n      this.setState({ emptyField: true })\r\n      this.changeView('');\r\n  \r\n    } else {\r\n      alert('Все поля пустые!')\r\n    }\r\n  }\r\n\r\n  changeView = (view, input) => {\r\n    if (input) this.setState({emptyField: false})\r\n\r\n    this.setState({view, input});\r\n  }\r\n\r\n  setData = dataObj => {\r\n\r\n\r\n    if (dataObj === null) {\r\n      return this.setState({emptyField: true})\r\n    } \r\n    \r\n    this.setState({\r\n      emptyField: false,\r\n      note: {\r\n      ...this.state.note,\r\n      ...dataObj\r\n      }\r\n    })\r\n  }\r\n\r\n  setInput = input => {\r\n    this.setState({input})\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={cn(style.notesPanel, style[this.state.view])}>\r\n        <div className={style.notesPanelWrap} \r\n            ref={this.props.hhhhh} \r\n            style={{backgroundColor: this.state.note.bgColor}}>\r\n\r\n          { (this.state.view === '') && <DefaultPanel setPanelView={this.changeView} /> }\r\n          { (this.state.view !== '') && <NotePanelView onClickAddBtn={this.onClickAddBtn}\r\n                                                        setInput={this.setInput}\r\n                                                        input={this.state.input} \r\n                                                        setData={this.setData} \r\n                                                        view={this.state.view} /> }\r\n\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    notes: state.firestore.ordered.notes\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    addNote: (note, image) => dispatch(addItem(note, image)),\r\n  }\r\n}\r\n\r\nexport default compose(\r\n  connect(mapStateToProps, mapDispatchToProps),\r\n  firestoreConnect([\r\n    { collection: 'notes' }\r\n  ]),\r\n  OutsideAlerter\r\n)(AddNotesPanel)\r\n","import React, { Component } from 'react';\r\nimport Modal from 'react-modal';\r\nimport style from './modal-box.module.scss'\r\n\r\n\r\nconst customStyles = {\r\n  content : {\r\n    maxWidth              : '600px',\r\n    width                 : '100%',\r\n    top                   : '50%',\r\n    left                  : '50%',\r\n    right                 : 'auto',\r\n    bottom                : 'auto',\r\n    marginRight           : '-50%',\r\n    transform             : 'translate(-50%, -50%)',\r\n    zIndex                : '100',\r\n    padding               : '0',\r\n    overflow              : 'visible',\r\n    borderRadius          : '8px',\r\n    border                : 'none'\r\n  }\r\n};\r\n\r\nexport default class ModalBox extends Component {\r\n  render() {\r\n    \r\n    return (\r\n      <Modal isOpen={this.props.isOpen} \r\n              style={customStyles}\r\n              overlayClassName={style.overlay}\r\n              onRequestClose={this.props.onRequestClose} >\r\n        {this.props.children}\r\n      </Modal>\r\n    )\r\n  }\r\n}\r\n","import ModalBox from './modal-box';\n\nexport default ModalBox;\n","import React, {Component} from 'react'\r\nimport {connect} from 'react-redux';\r\nimport { compose } from 'redux'\r\nimport ModalBox from './../../modal-box'\r\nimport { firestoreConnect } from 'react-redux-firebase'\r\nimport {updateNote, addMarkNote, addItem, addImage, delNote, delImg, replaceImage} from '../../../redux/notes-reducer'\r\nimport NoteBottomPanel from '../../common/note-bottom-panel';\r\nimport AddBtn from '../../common/add-btn/add-btn'\r\nimport FixMark from '../../common/fix-mark'\r\nimport PicturePreviewBox from '../../common/picture-preview-box'\r\nimport style from './modal-container.module.scss'\r\nimport * as moment from 'moment';\r\nimport cn from 'classnames'\r\n\r\n\r\nclass ModalContainer extends Component {\r\n  state = {\r\n    currentColor: this.props.note.bgColor,\r\n    picture: null,\r\n    input: null,\r\n  }\r\n  \r\n  componentDidMount() {\r\n    // if (this.props.note.url) {\r\n    //   this.setState({\r\n    //     input: this.props.note.url\r\n    //   })\r\n    // }\r\n  }\r\n  \r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevProps.modalIsOpen !== this.props.modalIsOpen) {\r\n      if (this.props.note.url) {\r\n        this.setState({\r\n          input: this.props.note.url\r\n        })\r\n      } else {\r\n        this.setState({\r\n          input: null\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  closeModal = e => {\r\n    e.stopPropagation()\r\n    \r\n    const input = this.state.input;\r\n\r\n    if (this.props.note.url && (input === null)) {\r\n      this.props.setData({input: 'delImg'})\r\n    } else if (input && (typeof input === 'object')) {\r\n      this.props.setData({input: 'replaceImage', inputTarget: input})\r\n    } else {\r\n      this.props.setData({})\r\n    }\r\n\r\n    this.props.modal(false)\r\n  }\r\n  \r\n  cloneNote = () => {\r\n    let {...note} = this.props.note;\r\n    delete note.id\r\n\r\n    this.props.addNote(note)\r\n  }\r\n\r\n  getColor = currentColor => {\r\n    this.setState({\r\n      currentColor\r\n    })\r\n\r\n    this.props.updateNote(this.props.note.id, {bgColor: currentColor})\r\n  }\r\n  \r\n  onDelete = () => this.setState({input: null})\r\n  \r\n  render() {\r\n    const {note, notes, deleteNote, updateNote, previewContent, modalIsOpen} = this.props;\r\n    const {input} = this.state;\r\n    \r\n    const panels = [\r\n      {\r\n        name: 'color',\r\n        currentColor: note.bgColor,  \r\n        getColor: bgColor => this.getColor(bgColor),  \r\n      }, {\r\n        name: 'addImg',\r\n        addImg: (input) => this.setState({input}),\r\n      }, {\r\n        name: 'delNote',\r\n        onClickDelNoteBtn: () => deleteNote(note, notes),\r\n      }, {\r\n        name: 'createClone',\r\n        onClickCreateCloneBtn: () => this.cloneNote(),\r\n      }\r\n    ]\r\n  \r\n    return (\r\n      <div>\r\n\r\n        {previewContent}\r\n\r\n        <ModalBox isOpen={modalIsOpen} \r\n                  onRequestClose={this.closeModal}>\r\n\r\n          <div className={style.modalWrap} style={{backgroundColor: note.bgColor}}>\r\n            <PicturePreviewBox input={input} onDelete={this.onDelete} />\r\n            <div className={style.fixMark}>\r\n              <FixMark check={note.fixMark} onClick={() => updateNote(note.id, {fixMark: !note.fixMark})} />\r\n            </div>\r\n            <div>\r\n\r\n              {this.props.children}\r\n\r\n              <div className={style.date}>Измененно: {moment(note.time).format('LTS')}</div>\r\n            </div>\r\n            <div className={style.bottomPanel}>\r\n              <div className={style.bottomPanelBox}>\r\n                <NoteBottomPanel panels={panels} />\r\n              </div>\r\n              <div className={style.btns}>\r\n                <AddBtn text=\"Закрыть\" onClick={this.closeModal} />\r\n                {/* <div className={style.cancelBtn}>\r\n                  <AddBtn text=\"Отменить\" onClick={this.cancelModal} />\r\n                </div> */}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n        </ModalBox>\r\n\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    notes: state.firestore.ordered.notes,\r\n    markNotes: state.notesReducer.markNotes\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    addImage: (note, id) => dispatch(addImage(note, id)),\r\n    updateNote: (id, obj) => dispatch(updateNote(id, obj)),\r\n    addMarkNote: note => dispatch(addMarkNote(note)),\r\n    addNote: (item) => dispatch(addItem(item)),\r\n    deleteNote: (note, notes) => dispatch(delNote(note, notes)),\r\n    delImg: (note) => dispatch(delImg(note)),\r\n    // replaceImage: (note, imgWidth, imgHeight, image) => dispatch(replaceImage(note, imgWidth, imgHeight, image)),\r\n  }\r\n}  \r\n\r\nexport default compose(\r\n  connect(mapStateToProps, mapDispatchToProps),\r\n  firestoreConnect([\r\n    { collection: 'notes' }\r\n  ])\r\n)(ModalContainer)","import React, {Component} from 'react'\r\nimport PanelTitle from '../../common/panel-title'\r\nimport NotePanel from '../../common/note-panel'\r\nimport {updateNote, addMarkNote, addItem, addImage, delNote, replaceImage, delImg} from '../../../redux/notes-reducer'\r\nimport {connect} from 'react-redux';\r\nimport { firestoreConnect } from 'react-redux-firebase'\r\nimport { compose } from 'redux'\r\nimport getImgSizes from '../../../utils/get-image-sizes'\r\nimport cn from 'classnames'\r\nimport ModalContainer from '../modal-container/modal-container'\r\nimport style from './simple-note-preview.module.scss'\r\n\r\n\r\nclass SimpleNotePreview extends Component {\r\n  state = {\r\n    note: {\r\n      title: this.props.note.title || '',\r\n      text: this.props.note.text || '',\r\n    }\r\n  }\r\n  \r\n  onChangeText = text => {\r\n    this.setState(state => {\r\n      const note = {\r\n        ...state.note,\r\n        text: text\r\n      }\r\n\r\n      return { note }\r\n    })\r\n  }\r\n\r\n  onChangeTitle = title => {\r\n    this.setState(state => {\r\n      const note = {\r\n        ...state.note,\r\n        title: title\r\n      }\r\n\r\n      return { note }\r\n    })\r\n  }\r\n\r\n  setData = (obj) => {   \r\n    const isEmptyFields = (this.state.note.title === '') && (this.state.note.text === ''); \r\n\r\n    this.props.setData({\r\n      ...obj,\r\n      isEmptyFields\r\n    })\r\n\r\n    if (!isEmptyFields) {\r\n      this.props.updateNote(this.props.note.id, {\r\n        ...this.state.note,\r\n        time: +(new Date()),\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const previewContent = (\r\n      <div className={style.note}>\r\n        <div className={style.main}>\r\n          {this.props.note.title && (\r\n            <div className={style.title}>{this.props.note.title}</div>\r\n          )}\r\n          {this.props.note.text && (\r\n            <div className={style.text}>{this.props.note.text}</div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    )\r\n    \r\n    return (\r\n      <ModalContainer note={this.props.note} \r\n                      previewContent={previewContent} \r\n                      modalIsOpen={this.props.modalIsOpen} \r\n                      modal={this.props.modal} \r\n                      setData={this.setData}>\r\n\r\n        <PanelTitle value={this.props.note.title} getTitle={this.onChangeTitle} textareaClass={style.modalTitle} />\r\n        <NotePanel value={this.props.note.text} placeholder=\"Текст заметки\" getText={this.onChangeText} />\r\n        \r\n      </ModalContainer>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    notes: state.firestore.ordered.notes,\r\n    markNotes: state.notesReducer.markNotes\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    delImg: (note) => dispatch(delImg(note)),\r\n    addImage: (image, id) => dispatch(addImage(image, id)),\r\n    updateNote: (id, obj) => dispatch(updateNote(id, obj)),\r\n    addMarkNote: note => dispatch(addMarkNote(note)),\r\n    addNote: (item) => dispatch(addItem(item)),\r\n    deleteNote: (note, notes) => dispatch(delNote(note, notes)),\r\n    // replaceImage: (note, imgWidth, imgHeight, image) => dispatch(replaceImage(note, imgWidth, imgHeight, image)),\r\n  }\r\n}  \r\n\r\nexport default compose(\r\n  connect(mapStateToProps, mapDispatchToProps),\r\n  firestoreConnect([\r\n    { collection: 'notes' }\r\n  ])\r\n)(SimpleNotePreview)","import SimpleNotePreview from './simple-note-preview';\r\n\r\nexport default SimpleNotePreview;\r\n","import React, {Component} from 'react'\r\nimport List from '../../common/list/list'\r\nimport ListItems from '../../common/list/list-items/list-items'\r\nimport PanelTitle from '../../common/panel-title'\r\nimport style from './list-note-preview.module.scss'\r\nimport ModalContainer from '../modal-container/modal-container'\r\n  \r\n\r\nclass ListNotePreview extends Component {\r\n  state = {\r\n    modalIsOpen: false,\r\n\r\n    note: {\r\n      lists: this.props.note.lists,\r\n    }\r\n  }\r\n  \r\n  onChangeTitle = title => {\r\n    this.setState(state => {\r\n      const note = {\r\n        ...state.note,\r\n        title: title\r\n      }\r\n\r\n      return { note }\r\n    })\r\n  }\r\n\r\n  returningItems = lists => {\r\n    this.setState({\r\n      note: {\r\n        ...this.state.note,\r\n        lists\r\n      }\r\n    })\r\n  }\r\n\r\n  setData = (obj) => {   \r\n    const isEmptyFields = (this.state.note.lists.length === 0); \r\n\r\n    this.props.setData({\r\n      ...obj,\r\n      isEmptyFields\r\n    })\r\n\r\n    if (!isEmptyFields) {\r\n      this.props.updateNote(this.props.note.id, {\r\n        ...this.state.note,\r\n        time: +(new Date()),\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const previewContent = (\r\n      <div>\r\n        {this.props.note.title && (\r\n          <div className={style.title}>{this.props.note.title}</div>\r\n        )}\r\n        {this.props.note.lists && (\r\n          <div className={style.lists}>\r\n            <ListItems items={this.props.note.lists} viewMode=\"only-view\" /> \r\n          </div>\r\n        )}\r\n      </div>\r\n    )\r\n\r\n    return (\r\n      <ModalContainer note={this.props.note} \r\n                      previewContent={previewContent} \r\n                      modalIsOpen={this.props.modalIsOpen} \r\n                      modal={this.props.modal}\r\n                      setData={this.setData}>\r\n        \r\n        <PanelTitle value={this.props.note.title} getTitle={this.onChangeTitle} textareaClass={style.modalTitle} />\r\n        <List returningItems={this.returningItems} \r\n              lists={this.state.note.lists} />\r\n      \r\n      </ModalContainer>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ListNotePreview;","import React from 'react';\nimport svg from './puff.svg'\nimport style from './spinner.module.scss';\nimport className from 'classnames'\n\n\nconst Spinner = props => {\n  const mainClasses = props.classes ? props.classes.map(cls => style[cls]) : [];\n\n  return (\n    <div className={style.spinner}>\n      <img className={className(style.spinnerImg, mainClasses)} src={svg} alt=\"\" />\n    </div>\n  );\n};\n\nexport default Spinner;\n","import React, {Component} from 'react'\r\nimport Spinner from '../../common/spinner/spinner'\r\nimport style from './img-box.module.scss'\r\n\r\n\r\nclass ImgBox extends Component {\r\n  state = {\r\n    loader: true,\r\n    height: null,\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.onLoad(this.state.loader);\r\n    this.calcHeight()\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.note.imgHeight !== prevProps.note.imgHeight) {\r\n      this.calcHeight()\r\n    }\r\n    \r\n    if (this.props.width !== prevProps.width) {\r\n      this.calcHeight()\r\n    }\r\n    \r\n  }\r\n\r\n  calcHeight = () => {\r\n    const {imgHeight, imgWidth} = this.props.note;\r\n    const height = this.props.width * (imgHeight / imgWidth);\r\n\r\n    this.setState({height})\r\n  }\r\n\r\n  onLoad = e => {\r\n    this.props.onLoad(false);\r\n\r\n    this.setState({\r\n      loader: false,\r\n    })\r\n  }\r\n\r\n  render() {\r\n    \r\n    return (\r\n      <div className={style.imgBox} style={{height: this.state.height}}>\r\n        {this.props.note.url && (\r\n          <img className=\"img-fluid\" \r\n                src={this.props.note.url}\r\n                onLoad={this.onLoad} \r\n                onError={this.onError}\r\n                className={style.img} />\r\n        )}\r\n        <Spinner classes={['small']} />\r\n        {/* {this.state.loader && <Spinner classes={['small']} />} */}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ImgBox","import React, {Component} from 'react'\r\nimport ImgBox from '../img-box/img-box'\r\n\r\n\r\nclass ImgHeightLoader extends Component {\r\n  box = React.createRef()\r\n\r\n  state = {\r\n    boxWidth: null,\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({\r\n      boxWidth: this.box.current.offsetWidth,\r\n    })\r\n\r\n    window.addEventListener(\"resize\", this.updateDimensions.bind(this));\r\n  }\r\n  \r\n  componentWillUnmount() {\r\n    this.box = null\r\n    window.removeEventListener(\"resize\", this.updateDimensions.bind(this));\r\n  }\r\n\r\n  updateDimensions = () => {\r\n    if (this.box) {\r\n      this.setState({ boxWidth: this.box.current.offsetWidth });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"img-height-loader\" ref={this.box}>\r\n        {this.props.note.imgHeight && (\r\n          <ImgBox note={this.props.note} width={this.state.boxWidth} onLoad={this.props.onLoad} />\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ImgHeightLoader","import React, {Component} from 'react'\r\nimport style from './note-preview.module.scss'\r\nimport NoteBottomPanel from '../common/note-bottom-panel/note-bottom-panel';\r\nimport SimpleNotePreview from './simple-note-preview';\r\nimport ListNotePreview from './list-note-preview/list-note-preview'\r\nimport {updateNote, addMarkNote, addItem, addImage, delNote, replaceImage, delImg} from '../../redux/notes-reducer'\r\nimport {connect} from 'react-redux';\r\nimport { firestoreConnect } from 'react-redux-firebase'\r\nimport { compose } from 'redux'\r\nimport FixMark from '../common/fix-mark/fix-mark'\r\nimport ImgHeightLoader from '../common/img-height-loader/img-height-loader'\r\nimport getImgSizes from '../../utils/get-image-sizes'\r\nimport cn from 'classnames'\r\nimport ClickIcon from '../common/click-icon';\r\n\r\n\r\nclass NotesPreview extends Component {\r\n  state = {\r\n    currentColor: this.props.note.bgColor,\r\n    mark: false,\r\n    modalIsOpen: false,\r\n    loader: true\r\n  }\r\n  \r\n\r\n  onClickMark = () => {\r\n    // this.setState(state => {\r\n    //   return {mark: !state.mark}\r\n    // })\r\n    \r\n    this.props.addMarkNote(this.props.note)\r\n  }\r\n\r\n  cloneNote = () => {\r\n    let {...note} = this.props.note;\r\n    delete note.id\r\n\r\n    this.props.addNote(note)\r\n  }\r\n\r\n  addImage(input) {\r\n    const image = input.files[0];\r\n\r\n    // alert(this.props.note.imgHeight)\r\n    if (this.props.note.imgHeight) {\r\n        this.props.replaceImage(this.props.note, input)\r\n    } else {\r\n      getImgSizes(input, (imgWidth, imgHeight) => {\r\n        this.props.updateNote(this.props.note.id, {imgWidth, imgHeight})\r\n        this.props.addImage(image, this.props.note.id);\r\n      })\r\n    }\r\n  }\r\n\r\n  setData = (obj) => {   \r\n    \r\n    switch(obj.input) {\r\n      case 'delImg' :\r\n        if (obj.isEmptyFields) {\r\n          this.props.deleteNote(this.props.note, this.props.notes)\r\n        } else {\r\n          this.props.delImg(this.props.note)\r\n          this.props.updateNote(this.props.note.id, {\r\n            imgHeight: null, imgWidth: null\r\n          });\r\n        }\r\n        break;\r\n      case 'replaceImage' :\r\n          this.addImage(obj.inputTarget);\r\n        break;\r\n    }\r\n  }\r\n\r\n  buildMain() {\r\n    switch(this.props.note.type) {\r\n      case 'note' :\r\n        return <SimpleNotePreview note={this.props.note} \r\n                                  modal={this.modal}\r\n                                  modalIsOpen={this.state.modalIsOpen} \r\n                                  setData={this.setData} />\r\n      case 'list' :\r\n        return <ListNotePreview note={this.props.note} \r\n                                updateNote={this.props.updateNote} \r\n                                modalIsOpen={this.state.modalIsOpen} \r\n                                setData={this.setData}\r\n                                modal={this.modal} />\r\n      default :\r\n        return <div>no note</div>\r\n    }\r\n  }\r\n\r\n  getColor = currentColor => {\r\n    this.setState({currentColor});\r\n    this.props.updateNote(this.props.note.id, {bgColor: currentColor})\r\n  }\r\n\r\n  modal = modalIsOpen => this.setState({modalIsOpen})\r\n\r\n  onClickFixMark = () => {\r\n    this.props.updateNote(this.props.note.id, {fixMark: !this.props.note.fixMark})\r\n  }\r\n\r\n  onLoad = loader => {\r\n    this.setState({loader})\r\n  }\r\n  \r\n  render() {\r\n    const {note, notes, deleteNote} = this.props;\r\n    const {mark, modalIsOpen, currentColor, loader} = this.state;\r\n\r\n    let bottomPanelPosition = 'relative';\r\n    let paddingTop = null;\r\n\r\n    const panels = [\r\n      {\r\n        name: 'color',\r\n        currentColor,\r\n        getColor: bgColor => this.getColor(bgColor),\r\n      }, {\r\n        name: 'addImg',\r\n        addImg: (input) => this.addImage(input),\r\n      }, {\r\n        name: 'delNote',\r\n        onClickDelNoteBtn: () => deleteNote(note, notes),\r\n      }, {\r\n        name: 'createClone',\r\n        onClickCreateCloneBtn: () => this.cloneNote(),\r\n      }\r\n    ]\r\n\r\n    if (note.imgHeight) {\r\n      bottomPanelPosition = 'absolute';\r\n    } else {\r\n      paddingTop = style.paddingTop\r\n    }\r\n\r\n    if (note.text || note.title || note.lists) {\r\n      bottomPanelPosition = 'relative';\r\n      paddingTop = style.paddingTop\r\n    } else {\r\n      bottomPanelPosition = 'absolute';\r\n    }\r\n\r\n    if ((note.imgHeight) && (note.text || note.title || note.lists)) {\r\n      paddingTop = style.paddingTop\r\n    }\r\n    \r\n    return (\r\n      <div className={cn(style.notePreview, (mark && style.activeNote), (modalIsOpen && style.openModal), (loader && style.loader))}  \r\n            style={{backgroundColor: note.bgColor}}\r\n            onClick={() => this.modal(true)}>\r\n        <div className={style.notePreviewWrap} >\r\n          <ImgHeightLoader note={note} onLoad={this.onLoad} />\r\n          {/* <div className={style.selectedMark} >\r\n            <ClickIcon onClick={this.onClickMark}>\r\n              <i className=\"fas fa-check-circle\" />\r\n            </ClickIcon>\r\n          </div> */}\r\n          <div className={style.fixMark}>\r\n            <FixMark check={note.fixMark} onClick={this.onClickFixMark} />\r\n          </div>\r\n          <div className={cn(style.main, paddingTop)}>\r\n            {this.buildMain()}\r\n          </div>\r\n        </div>\r\n        <div className={cn(style.NoteBottomPanel, style[bottomPanelPosition])}>\r\n          <NoteBottomPanel panels={panels} />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    notes: state.firestore.ordered.notes,\r\n    markNotes: state.notesReducer.markNotes\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    delImg: (note) => dispatch(delImg(note)),\r\n    addImage: (image, id) => dispatch(addImage(image, id)),\r\n    updateNote: (id, obj) => dispatch(updateNote(id, obj)),\r\n    addMarkNote: note => dispatch(addMarkNote(note)),\r\n    addNote: (item) => dispatch(addItem(item)),\r\n    deleteNote: (note, notes) => dispatch(delNote(note, notes)),\r\n    replaceImage: (note, imgWidth, imgHeight, image) => dispatch(replaceImage(note, imgWidth, imgHeight, image)),\r\n  }\r\n}  \r\n\r\nexport default compose(\r\n  connect(mapStateToProps, mapDispatchToProps),\r\n  firestoreConnect([\r\n    { collection: 'notes' }\r\n  ])\r\n)(NotesPreview)","import NotePreview from './note-preview';\r\n\r\nexport default NotePreview;\r\n","import Spinner from './spinner';\n\nexport default Spinner;\n","import AllNotes from './all-notes';\r\n\r\nexport default AllNotes;\r\n","import React, {Component} from 'react'\r\nimport NotePreview from '../note-preview'\r\nimport {connect} from 'react-redux';\r\nimport { firestoreConnect } from 'react-redux-firebase'\r\nimport { compose } from 'redux'\r\nimport Spinner from '../common/spinner'\r\nimport style from './all-notes.module.scss'\r\nimport Masonry from 'react-masonry-component';\r\nimport cn from 'classnames'\r\n\r\n\r\nconst AllNotes = props => {\r\n  const masonryOptions = { transitionDuration: 0 };\r\n  const imagesLoadedOptions = { background: '.my-bg-image-el' }\r\n\r\n  const {notes} = props;\r\n  let notesList = [];\r\n  let fixNotesList = [];\r\n\r\n  const sortNotesFunc = (a, b) => {\r\n    if (a.time > b.time) return -1;\r\n    if (a.time == b.time) return 0;\r\n    if (a.time < b.time) return 1;\r\n  }\r\n\r\n  const getMasonry = children => {\r\n    return (\r\n      <Masonry\r\n        className={cn(style.npWrap, '')} // default ''\r\n        // elementType={'ul'} // default 'div'\r\n        options={masonryOptions} // default {}\r\n        disableImagesLoaded={false} // default false\r\n        updateOnEachImageLoad={false} // default false and works only if disableImagesLoaded is false\r\n        imagesLoadedOptions={imagesLoadedOptions} // default {}\r\n        onLayoutComplete={(e) => {}} \r\n        // onLayoutComplete={(e) => {console.log(1111, e)}} \r\n        >\r\n\r\n          {children}\r\n\r\n      </Masonry>\r\n    )\r\n  }\r\n  \r\n  if (notes) {\r\n    let [...sortNotes] = notes;\r\n    sortNotes.sort(sortNotesFunc);\r\n\r\n    const getNote = note => <NotePreview key={note.id} note={note}/>\r\n\r\n    notesList = sortNotes.filter(note => !note.fixMark).map(getNote)\r\n    fixNotesList = sortNotes.filter(note => note.fixMark).map(getNote)\r\n  }\r\n\r\n  const getNotes = () => {\r\n    if (notes.length !== 0) {\r\n      return (\r\n        <>\r\n          {(fixNotesList.length !== 0) &&\r\n            <>\r\n              <div className={style.fixNotesBox}>\r\n                <div className={style.notesListTitle}>Закрепленные заметки</div>\r\n                {getMasonry(fixNotesList)}\r\n              </div>\r\n            </>}\r\n\r\n          {((fixNotesList.length !== 0) && (notesList.length !== 0)) && (\r\n            <div className={style.notesListTitle}>Другие заметки</div>\r\n          )}\r\n          {(notesList.length !== 0) && getMasonry(notesList)}\r\n        </>\r\n      )\r\n    } else {\r\n      return (\r\n        <div className={style.emptyNotesBox}>Список заметок пуст...</div>\r\n      )\r\n    }\r\n  }\r\n  \r\n  return (\r\n    <div className={style.allNotes}>\r\n      <div className=\"container\">\r\n        <div className={cn(style.main,  style.notesList)} >\r\n          {(notes === undefined) && <Spinner classes={['big']} />}\r\n          {(notes !== undefined) && getNotes()}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    notes: state.firestore.ordered.notes,\r\n  }\r\n}  \r\n\r\nexport default compose(\r\n  connect(mapStateToProps, null),\r\n  firestoreConnect([\r\n    { collection: 'notes' }\r\n  ])\r\n)(AllNotes)","import ErrorBoundry from './error-boundry';\r\n\r\nexport default ErrorBoundry;\r\n","import React, { Component } from 'react';\n\n// import ErrorIndicator from '../error-indicator/error-indicator';\n\nexport default class ErrorBoundry extends Component {\n\n  state = {\n    hasError: false,\n    info: null\n  };\n\n  componentDidCatch(error, {componentStack}) {\n    console.log('componentStack')\n    console.log(componentStack)\n\n    this.setState({\n      hasError: true,\n      info: componentStack\n    });\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <div>{this.state.info}</div>\n      // return <ErrorIndicator />\n    }\n\n    return this.props.children;\n  }\n}\n","import App from './app';\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport Header from '../header'\r\nimport {AddNotesPanel} from '../add-notes-panel'\r\nimport AllNotes from '../all-notes'\r\nimport ErrorBoundry from '../error-boundry';\r\nimport style from './app.module.scss'\r\n\r\n\r\nconst App = () => {\r\n  return (\r\n    <ErrorBoundry>\r\n      \r\n      <div className={style.app}>\r\n        <Header />\r\n\r\n        <div className={style.main}>\r\n          <AddNotesPanel />\r\n          <AllNotes />\r\n        </div>\r\n      </div>\r\n\r\n    </ErrorBoundry>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { createStore, combineReducers, applyMiddleware, compose } from 'redux'\r\nimport notesReducer from \"./notes-reducer\";\r\nimport { firestoreReducer } from 'redux-firestore';\r\nimport thunk from 'redux-thunk'\r\nimport { reduxFirestore, getFirestore } from 'redux-firestore';\r\nimport { reactReduxFirebase, getFirebase } from 'react-redux-firebase';\r\nimport fbConfig, {storage} from './../config/fbConfig'\r\n\r\nlet reducers = combineReducers({\r\n  notesReducer,\r\n  firestore: firestoreReducer\r\n});\r\n\r\n\r\n// let store = createStore(reducers);\r\n\r\nconst store = createStore(reducers,\r\n  compose(\r\n    applyMiddleware(thunk.withExtraArgument({getFirebase, getFirestore, storage})),\r\n    reactReduxFirebase(fbConfig), // redux binding for firebase\r\n    reduxFirestore(fbConfig) // redux bindings for firestore\r\n  )\r\n);\r\n\r\nwindow.store = store.getState()\r\n\r\n\r\nexport default store;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.scss';\nimport App from './components/app';\nimport Modal from 'react-modal';\nimport { Provider } from 'react-redux';\nimport {store} from './redux';\n\nModal.setAppElement('#root')\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>, \n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bottomPanel\":\"note-panel-view_bottomPanel__29KVY\",\"bottomPanelBox\":\"note-panel-view_bottomPanelBox__1rYJA\",\"fixMark\":\"note-panel-view_fixMark__2gpvP\",\"img\":\"note-panel-view_img__3FAgV\",\"deleteIcon\":\"note-panel-view_deleteIcon__3MsXU\",\"pictureBox\":\"note-panel-view_pictureBox__3p5bR\",\"picturePreview\":\"note-panel-view_picturePreview__2pPmS\",\"title\":\"note-panel-view_title__xeoI8\",\"noteBottom\":\"note-panel-view_noteBottom__czL6B\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"icon\":\"default-panel_icon__2F9Sf\",\"imgIcon\":\"default-panel_imgIcon__r8BZi\",\"listIcon\":\"default-panel_listIcon__3EB_U\",\"textarea\":\"default-panel_textarea__q9SVX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"img\":\"simple-note-preview_img__3UylK\",\"bottomPanelBox\":\"simple-note-preview_bottomPanelBox__1qXqN\",\"bottomPanel\":\"simple-note-preview_bottomPanel__222qF\",\"noteWrap\":\"simple-note-preview_noteWrap__1LOSl\",\"date\":\"simple-note-preview_date__gxGPL\",\"fixMark\":\"simple-note-preview_fixMark__Iui8j\",\"icon\":\"simple-note-preview_icon__25tfi\",\"imageBox\":\"simple-note-preview_imageBox__3BcK2\",\"title\":\"simple-note-preview_title__1FAu-\",\"text\":\"simple-note-preview_text__1k0HK\",\"modalTitle\":\"simple-note-preview_modalTitle__21gWi\"};"],"sourceRoot":""}
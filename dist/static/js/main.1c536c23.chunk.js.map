{"version":3,"sources":["components/common/logo/logo.module.scss","components/add-notes-panel/add-notes-panel.module.scss","components/common/picture-preview/picture-preview.module.scss","components/common/list/form/form.module.scss","components/common/spinner/spinner.module.scss","components/note-preview/list-note-preview/list-note-preview.module.scss","components/common/input-file/input-file.module.scss","components/common/fix-mark/fix-mark.module.scss","components/common/panel-title/panel-title.module.scss","components/common/note-panel/note-panel.module.scss","components/common/list/list-items/list-items.module.scss","components/common/img-box/img-box.module.scss","components/app/app.module.scss","components/note-preview/note-preview.module.scss","components/common/logo/logo.png","components/common/click-icon/click-icon.module.scss","styles/btn.module.scss","components/common/add-btn/add-btn.module.scss","components/modal-box/modal-box.module.scss","components/common/spinner/puff.svg","components/common/choose-color/choose-color.module.scss","components/add-notes-panel/note-panel-view/note-panel-view.module.scss","components/all-notes/all-notes.module.scss","components/note-preview/modal-container/modal-container.module.scss","components/add-notes-panel/list-note-panel/list-note-panel.module.scss","components/header/header.module.scss","components/common/note-bottom-panel/note-bottom-panel.module.scss","components/common/list/todo-list-item/todo-list-item.module.scss","config/fbConfig.js","utils/get-image-sizes.js","redux/notes-reducer.js","components/common/logo/index.js","components/common/logo/logo.js","components/common/choose-color/choose-color.js","components/common/click-icon/index.js","components/common/click-icon/click-icon.js","components/common/input-file/input-file.js","components/common/fix-mark/fix-mark.js","components/common/note-bottom-panel/note-bottom-panel.js","components/common/note-bottom-panel/index.js","components/header/header.js","components/header/index.js","components/common/panel-title/panel-title.js","components/common/panel-title/index.js","components/common/fix-mark/index.js","components/common/add-btn/add-btn.js","components/common/add-btn/index.js","utils/set-img-preview.js","components/common/picture-preview/index.js","components/common/picture-preview/picture-preview.js","components/common/note-panel/note-panel.js","components/common/note-panel/index.js","components/common/list/todo-list-item/index.js","components/common/list/todo-list-item/todo-list-item.js","components/common/list/list-items/list-items.js","components/common/list/form/form.js","components/common/list/list-items/index.js","components/common/list/form/index.js","components/common/list/list.js","components/common/list/index.js","components/add-notes-panel/list-note-panel/index.js","components/add-notes-panel/list-note-panel/list-note-panel.js","utils/validateTextFields.js","components/add-notes-panel/note-panel-view/index.js","components/add-notes-panel/note-panel-view/note-panel-view.js","components/add-notes-panel/default-panel/index.js","components/add-notes-panel/default-panel/default-panel.js","hoc/with-outside-alerter.js","components/add-notes-panel/add-notes-panel.js","components/modal-box/modal-box.js","components/modal-box/index.js","components/common/spinner/spinner.js","components/common/img-box/img-box.js","components/common/img-height-loader/img-height-loader.js","components/common/img-height-loader/index.js","components/note-preview/modal-container/modal-container.js","components/note-preview/simple-note-preview/index.js","components/note-preview/simple-note-preview/simple-note-preview.js","components/note-preview/list-note-preview/list-note-preview.js","components/note-preview/note-preview.js","components/note-preview/index.js","components/common/spinner/index.js","components/all-notes/index.js","components/all-notes/all-notes.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","components/app/index.js","components/app/app.js","redux/store.js","index.js","components/add-notes-panel/default-panel/default-panel.module.scss","components/note-preview/simple-note-preview/simple-note-preview.module.scss"],"names":["module","exports","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","firestore","settings","timestampsInSnapshots","storage","getImgSizes","input","callback","image","files","_URL","window","URL","webkitURL","imageInstance","Image","onload","imgWidth","this","width","imgHeight","height","src","createObjectURL","defaultNodeProps","time","Date","initialState","markNotes","addMarkNote","payload","type","addImage","id","dispatch","getState","getFirestore","name","getTime","split","pop","genImageName","endFunc","ref","put","on","snapshot","error","alert","message_","putImage","child","getDownloadURL","then","url","updateNote","imgName","setImage","addItem","note","newNote","collection","add","undefined","catch","err","delNote","notes","filter","item","length","delImg","delete","doc","deleteField","console","log","replaceImage","obj","update","field","removeCapital","FieldValue","notesReducer","state","action","index","findIndex","push","splice","Logo","className","style","logo","logoIcon","logoName","ChooseColor","isShowList","onMouseEnter","setState","onMouseLeave","getColors","map","i","borderColor","currentColor","props","cn","listItem","backgroundColor","onClick","e","stopPropagation","getColor","mark","getList","box","position","positionTopLeft","list","chooseColor","title","class","Component","ClickIcon","tooltipText","clickIcon","data-tip","children","place","effect","InputFile","uploadFile","onChange","inputClone","target","cloneNode","onChangeFile","FixMark","checkMark","check","textMark","fixMark","NoteBottomPanel","showPanels","panels","icon","onClickDelNoteBtn","onClickCreateCloneBtn","addImg","onClickFixMark","noteBottomClass","noteBottomPanel","Header","yyyyyy","removeAllMarkNote","getForAllNotes","f","changeColor","bgColor","forEach","el","cloneNote","addNote","fixMarkValue","find","deleteAllNote","header","headerNotice","noticeContainer","headerNoticeMain","noticeTitle","main","compose","connect","deleteNote","firestoreConnect","PanelTitle","textarea","React","createRef","value","onTitleChange","currentTarget","getTitle","autosize","current","textareaClass","panelTitle","placeholder","addBtn","baseBtn","btn","role","text","setImgPreview","reader","FileReader","result","readAsDataURL","PicturePreview","picture","prevProps","prevState","pictureBox","initialPicture","img","alt","notePanel","getText","activateEditMode","editMode","TodoListItem","focus","onDeleteTodoListItem","checkbox","onChangeTextField","onClickCompletedCheckbox","liClasses","active","checkboxMark","closeBtn","ListItems","items","viewMode","array","Form","onChangeInputText","onChangeForm","form","formInput","List","itemId","lists","createTodoItem","inputId","listsCopy","idx","slice","returningItems","addTodoItem","todoList","ListNotePanel","validateTextFields","replace","NotePanelView","progress","onClickAddBtn","onDelete","setInput","setData","validField","view","picturePreview","deleteIcon","bottomPanel","bottomPanelBox","noteBottom","DefaultPanel","setPanelView","Fragment","listIcon","imgIcon","OutsideAlerter","View","setWrapperRef","bind","handleClickOutside","show","document","addEventListener","removeEventListener","node","wrapperRef","event","contains","hhhhh","AddNotesPanel","defaultNoteView","emptyField","changeView","dataObj","notesPanel","notesPanelWrap","ordered","customStyles","content","maxWidth","top","left","right","bottom","marginRight","transform","zIndex","padding","overflow","ModalBox","isOpen","overlayClassName","ddd","onRequestClose","Spinner","mainClasses","classes","cls","spinner","spinnerImg","svg","ImgBox","loader","calcHeight","onLoad","imgBox","onError","ImgHeightLoader","boxWidth","updateDimensions","offsetWidth","ModalContainer","inputData","closeModal","modal","setImgParams","previewContent","modalIsOpen","date","moment","format","btns","SimpleNotePreview","onChangeText","onChangeTitle","modalTitle","ListNotePreview","data","NotesPreview","onClickMark","onClickNotePreview","bottomPanelPosition","paddingTop","notePreview","activeNote","opacity","notePreviewWrap","buildMain","NotePreview","AllNotes","projects","masonryOptions","transitionDuration","imagesLoadedOptions","background","notesList","fixNotesList","getMasonry","npWrap","options","disableImagesLoaded","updateOnEachImageLoad","onLayoutComplete","sortNotes","sort","a","b","getNote","key","allNotes","fixNotesBox","notesListTitle","emptyNotesBox","ErrorBoundry","hasError","info","componentStack","App","app","reducers","combineReducers","firestoreReducer","store","createStore","applyMiddleware","thunk","withExtraArgument","getFirebase","reactReduxFirebase","fbConfig","reduxFirestore","Modal","setAppElement","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.1c536c23.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"logo\":\"logo_logo__2wzac\",\"logoIcon\":\"logo_logoIcon__-1f5I\",\"logoName\":\"logo_logoName__1SeB_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"notesPanel\":\"add-notes-panel_notesPanel__2PvZk\",\"notesPanelWrap\":\"add-notes-panel_notesPanelWrap__3vGxa\",\"img\":\"add-notes-panel_img__1IMmn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"img\":\"picture-preview_img__jZr9U\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"form_form__VbASh\",\"formInput\":\"form_formInput__20PVr\",\"icon\":\"form_icon__17ICG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinner\":\"spinner_spinner__1fUKb\",\"small\":\"spinner_small__192s5\",\"big\":\"spinner_big__2ug0x\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"list-note-preview_title__19oMh\",\"lists\":\"list-note-preview_lists__31e9C\",\"modalTitle\":\"list-note-preview_modalTitle__3kEWb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"input-file_input__2UxNG\",\"uploadFile\":\"input-file_uploadFile__aLu6H\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fixMark\":\"fix-mark_fixMark__3VFm9\",\"check\":\"fix-mark_check__1eyTu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"textarea\":\"panel-title_textarea__zDjU0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"notePanel\":\"note-panel_notePanel__1t2YI\",\"textarea\":\"note-panel_textarea__2rSeb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"listItem\":\"list-items_listItem__376Lu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imgBox\":\"img-box_imgBox__2xyMy\",\"img\":\"img-box_img__1mhY4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"app_main__3o5VZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"selectedMark\":\"note-preview_selectedMark__1dHjp\",\"main\":\"note-preview_main__2uq4N\",\"paddingTop\":\"note-preview_paddingTop__1Zijp\",\"paddingBottom\":\"note-preview_paddingBottom__1ouiZ\",\"NoteBottomPanel\":\"note-preview_NoteBottomPanel__24Sqr\",\"fixMark\":\"note-preview_fixMark__2jbx2\",\"notePreview\":\"note-preview_notePreview__2ljV2\",\"activeNote\":\"note-preview_activeNote__2AqOA\",\"active\":\"note-preview_active__136CD\",\"notePreviewWrap\":\"note-preview_notePreviewWrap__2FN0c\",\"absolute\":\"note-preview_absolute__mh4cn\"};","module.exports = __webpack_public_path__ + \"static/media/logo.d12c0d77.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"clickIcon\":\"click-icon_clickIcon__2kZmn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btn\":\"btn_btn__15QAj\",\"btn_gray\":\"btn_btn_gray__3lwGL\",\"btn_block\":\"btn_btn_block__fEyrw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btn\":\"add-btn_btn__1zID0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ddd\":\"modal-box_ddd__2vVTX\"};","module.exports = __webpack_public_path__ + \"static/media/puff.13f271c7.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chooseColor\":\"choose-color_chooseColor__I3sn7\",\"title\":\"choose-color_title__2l2HI\",\"box\":\"choose-color_box__2SyYQ\",\"positionTopLeft\":\"choose-color_positionTopLeft__3f0FI\",\"positionBottomLeft\":\"choose-color_positionBottomLeft__2RU5b\",\"list\":\"choose-color_list__2opX-\",\"listItem\":\"choose-color_listItem__8sZiG\",\"mark\":\"choose-color_mark__2p12M\",\"currentColor\":\"choose-color_currentColor__1lMYL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bottomPanel\":\"note-panel-view_bottomPanel__29KVY\",\"bottomPanelBox\":\"note-panel-view_bottomPanelBox__1rYJA\",\"fixMark\":\"note-panel-view_fixMark__2gpvP\",\"img\":\"note-panel-view_img__3FAgV\",\"deleteIcon\":\"note-panel-view_deleteIcon__3MsXU\",\"pictureBox\":\"note-panel-view_pictureBox__3p5bR\",\"picturePreview\":\"note-panel-view_picturePreview__2pPmS\",\"title\":\"note-panel-view_title__xeoI8\",\"noteBottom\":\"note-panel-view_noteBottom__czL6B\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"emptyNotesBox\":\"all-notes_emptyNotesBox__3uzN7\",\"notesList\":\"all-notes_notesList__2NtRW\",\"npWrap\":\"all-notes_npWrap__tTnBd\",\"notesListTitle\":\"all-notes_notesListTitle__MB3wH\",\"fixNotesBox\":\"all-notes_fixNotesBox__3q5rl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"deleteIcon\":\"modal-container_deleteIcon__2vh9k\",\"pictureBox\":\"modal-container_pictureBox__PWT83\",\"img\":\"modal-container_img__XEWoW\",\"bottomPanelBox\":\"modal-container_bottomPanelBox__3ccMY\",\"bottomPanel\":\"modal-container_bottomPanel__XlKJV\",\"noteWrap\":\"modal-container_noteWrap__34lo5\",\"date\":\"modal-container_date__3DHwf\",\"fixMark\":\"modal-container_fixMark__3mInW\",\"icon\":\"modal-container_icon__16UJ4\",\"imageBox\":\"modal-container_imageBox__3zXBJ\",\"btns\":\"modal-container_btns__13yGI\",\"cancelBtn\":\"modal-container_cancelBtn__22evz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"list-note-panel_input__1P2xJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"header_header__1c1q6\",\"headerNotice\":\"header_headerNotice__2J6bA\",\"noticeContainer\":\"header_noticeContainer__1zsPY\",\"headerNoticeMain\":\"header_headerNoticeMain__3X45Y\",\"noticeTitle\":\"header_noticeTitle__1V8CF\",\"main\":\"header_main__2l3h6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"noteBottomPanel\":\"note-bottom-panel_noteBottomPanel__1jQ6k\",\"icon\":\"note-bottom-panel_icon__1P3QP\",\"choose-color\":\"note-bottom-panel_choose-color__1mAVn\",\"icon_3\":\"note-bottom-panel_icon_3__2AHKh\",\"bgColorBox\":\"note-bottom-panel_bgColorBox__X58Mj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"listItem\":\"todo-list-item_listItem__1jPMX\",\"checkbox\":\"todo-list-item_checkbox__1S2Bp\",\"checkboxMark\":\"todo-list-item_checkboxMark__1NvYX\",\"input\":\"todo-list-item_input__2Y7QU\",\"closeBtn\":\"todo-list-item_closeBtn__2PQAX\",\"active\":\"todo-list-item_active__1l40O\"};","import firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport 'firebase/auth';\n\nimport 'firebase/storage';\n\n\nvar config = {\n  apiKey: \"AIzaSyAzzRGnQXaBoFF9uJnEXRmWPeg91_wSpMY\",\n  authDomain: \"keep-be68c.firebaseapp.com\",\n  databaseURL: \"https://keep-be68c.firebaseio.com\",\n  projectId: \"keep-be68c\",\n  storageBucket: \"keep-be68c.appspot.com\",\n  messagingSenderId: \"1046598729377\",\n  appId: \"1:1046598729377:web:43bcad6a311acbe1\"\n};\nfirebase.initializeApp(config);\nfirebase.firestore().settings({ timestampsInSnapshots: true });\n\nconst storage = firebase.storage();\n\nexport {\n  storage, firebase as default\n} ","const getImgSizes = (input, callback) => {\r\n  const image = input.files[0];\r\n\r\n  if (image) {\r\n    let _URL = window.URL || window.webkitURL;\r\n    let imageInstance = new Image();\r\n\r\n    imageInstance.onload = function() {\r\n      const imgWidth = this.width;\r\n      const imgHeight = this.height;\r\n\r\n      callback(imgWidth, imgHeight) \r\n    };\r\n\r\n    imageInstance.src = _URL.createObjectURL(image);\r\n  }\r\n}\r\n\r\nexport default getImgSizes;","import firebase from '../config/fbConfig'\nimport getImgSizes from '../utils/get-image-sizes'\n\n\n\nconst defaultNodeProps = {\n  time: +(new Date()),\n}\n\nlet initialState = {\n  markNotes: []\n};\n\nconst notesReducer = (state = initialState, action) => {\n  switch(action.type) {\n    case 'CLEAR_MARKNOTES': {\n      return { markNotes: [] }\n    }\n    case 'CLEAR_MARKNOTES': {\n      return { markNotes: [] }\n    }\n    case 'ADD_MARK_NOTE': {\n      const [...markNotes] = state.markNotes;\n      let item;\n      \n      const index = markNotes.findIndex(item => item.id === action.payload.id)\n      if (index === -1) {\n        markNotes.push(action.payload)\n      } else {\n        item = markNotes[index]\n        markNotes.splice(index, 1)\n      }\n\n      console.log(markNotes)\n  \n      return {\n          ...state,\n          markNotes\n      };\n    }\n    default:\n        return state;\n  }\n}\n\nexport const clearMarkNotes = () => {\n  return {\n    type: 'CLEAR_MARKNOTES'\n  }\n};\n\nexport const addMarkNote = (payload) => {\n  return {\n    type: 'ADD_MARK_NOTE',\n    payload\n  }\n};\n\nexport const removeAllMarkNote = () => {\n  return {\n    type: 'REMOVE_ALL_MARK_NOTES'\n  }\n}\n\nconst genImageName = image => {\n  return new Date().getTime() + \".\" + image.name.split('.').pop();\n}\n\nconst putImage = (storage, image, name, endFunc) => {\n  return storage.ref(`images/${name}`).put(image)\n          .on('state_changed', \n            (snapshot) => {}, \n            (error) => { alert(error.message_) }, \n            endFunc\n          );\n}\n\nconst setImage = (name, id, dispatch, getState, getFirestore, storage) => {\n  storage.ref('images').child(name).getDownloadURL()\n    .then(url => {\n      updateNote(id, {url, imgName: name})(dispatch, getState, {getFirestore})\n    })\n}\n\nexport const addImage = (image, id) => {\n  return (dispatch, getState, {getFirestore, storage}) => {\n    const name = genImageName(image);\n    \n    putImage(storage, image, name, () => {\n      setImage(name, id, dispatch, getState, getFirestore, storage)\n    });\n  }\n}\n\nexport const addItem = (note, image) => {\n  return (dispatch, getState, {getFirestore, storage}) => {\n      let newNote = {\n        ...defaultNodeProps,\n        ...note\n      }\n \n      const firestore = getFirestore();\n      firestore.collection('notes').add(newNote).then(({id}) => {\n        if (image !== undefined) {\n      // if ((note.imgHeight !== undefined) && !note.url) {\n          addImage(image, id)(dispatch, getState, {getFirestore, storage});\n        }\n      }).catch(err => {\n        // dispatch({ type: 'CREATE_PROJECT_ERROR' }, err);\n      });\n  }\n};\n\nexport const delNote = (note, notes) => {\n  return (dispatch, getState, {getFirestore, storage}) => {\n\n    if (note.imgName) {\n      let matchesArr = notes.filter(item => item.imgName === note.imgName);\n\n\n      if (matchesArr.length < 2) {\n        delImg(note, storage)\n      }\n    }\n  \n    const firestore = getFirestore();\n    firestore.delete({ collection: 'notes', doc: note.id });\n  }\n};\n\nexport const delImg = (note, callback) => {\n  return (dispatch, getState, {getFirestore, storage}) => {\n    storage.ref(`images/${note.imgName}`).delete().then(function() {\n      deleteField(note.id, 'url')(dispatch, getState, {getFirestore})\n      deleteField(note.id, 'imgName')(dispatch, getState, {getFirestore})\n      deleteField(note.id, 'imgHeight')(dispatch, getState, {getFirestore})\n      deleteField(note.id, 'imgWidth')(dispatch, getState, {getFirestore})\n\n      callback()\n    }).catch(function(error) {\n      console.log(storage)\n    });\n  }\n}\n\nexport const replaceImage = (note, input) => {\n  return (dispatch, getState, {getFirestore, storage}) => {\n    const {id} = note;\n\n    delImg(note, () => {\n      getImgSizes(input, (imgWidth, imgHeight) => {\n        // alert(imgHeight)\n        updateNote(id, {imgWidth, imgHeight})(dispatch, getState, {getFirestore});\n        addImage(input.files[0], id)(dispatch, getState, {getFirestore, storage});\n      })\n    })(dispatch, getState, {getFirestore, storage})\n  }\n}\n\nexport const deleteAllNote = (notes) => {\n  return (dispatch, getState, {getFirestore, storage}) => {\n    dispatch(clearMarkNotes())\n    notes.forEach(note => {\n      delNote(note, notes)(dispatch, getState, {getFirestore, storage})\n    })\n  }\n};\n\nexport const updateNote = (id, obj) => {\n  return (dispatch, getState, {getFirestore}) => {\n    const firestore = getFirestore();\n    firestore.update({ collection: 'notes', doc: id }, obj)\n  }\n};\n\nexport const deleteField = (id, field) => {\n  return (dispatch, getState, {getFirestore}) => {\n    const firestore = getFirestore();\n    // firestore.update({ collection: 'notes', doc: id }, obj)\n\n    let cityRef = firestore.collection('notes').doc(id);\n\n    // Remove the 'capital' field from the document\n    let removeCapital = cityRef.update({\n      [field]: firebase.firestore.FieldValue.delete()\n    });\n\n    console.log(removeCapital)\n  }\n};\n\n\nexport default notesReducer;","import Logo from './logo';\n\nexport default Logo;\n","import React from 'react';\nimport logo from './logo.png';\nimport style from './logo.module.scss'\n\n\nconst Logo = () => {\n  return (\n    <div className={style.logo}>\n      <div className={style.logoIcon}>\n        <img src={logo} className=\"img-fluid\" />\n      </div>\n      <div className={style.logoName}>Keep clone</div>\n    </div>\n  )\n}\n\nexport default Logo;","import React, {Component} from 'react'\r\nimport style from './choose-color.module.scss';\r\nimport cn from 'classnames';\r\n\r\n\r\nexport default class ChooseColor extends Component {\r\n  state = {\r\n    isShowList: false\r\n  }\r\n\r\n  onMouseEnter = () => {\r\n    this.setState({\r\n      isShowList: true\r\n    })\r\n  }\r\n\r\n  onMouseLeave = () => {\r\n    this.setState({\r\n      isShowList: false\r\n    })\r\n  }\r\n  \r\n\r\n  getColors = () => {\r\n    let colors = ['#ffffff', '#f28b82', '#fbbc04', '#fff475', '#ccff90', '#a7ffeb', '#cbf0f8', '#aecbfa', '#d7aefb', '#fdcfe8', '#e6c9a8', '#e8eaed'];\r\n\r\n    return colors.map((item, i) => {\r\n      let borderColor = item;\r\n      let currentColor = null;\r\n\r\n      if (this.props.currentColor === item) currentColor = style.currentColor\r\n      if (i === 0) borderColor = '#eee'\r\n      \r\n      return <li className={cn(style.listItem, currentColor)} \r\n                  style={{backgroundColor: item, borderColor}} \r\n                  onClick={e => {\r\n                    e.stopPropagation()\r\n                    this.props.getColor(item)\r\n                  }}>\r\n                {currentColor && (\r\n                  <i className={cn(\"fas fa-check\", style.mark)}></i>\r\n                )}\r\n             </li>\r\n    });\r\n  }\r\n\r\n  getList = () => {\r\n    \r\n    return this.state.isShowList &&\r\n            <div className={cn(style.box, this.props.position ? style[this.props.position] : style.positionTopLeft)}>\r\n              <ul className={style.list}>\r\n                {this.getColors()}\r\n              </ul>\r\n            </div>\r\n  }\r\n\r\n  render() {\r\n    \r\n\r\n    return (\r\n      <div className={style.chooseColor} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\r\n        <span className={style.title}>\r\n          <i class=\"fas fa-palette\"></i>\r\n        </span>\r\n        {this.getList()}\r\n      </div>\r\n    )\r\n  }\r\n}","import ClickIcon from './click-icon';\n\nexport default ClickIcon;\n","import React, {Component} from 'react'\r\nimport style from './click-icon.module.scss'\r\nimport ReactTooltip from 'react-tooltip'\r\n\r\n\r\nconst ClickIcon = props => {\r\n  const onClick = e => {\r\n    e.stopPropagation();\r\n    props.onClick()\r\n  }\r\n\r\n  const {tooltipText} = props;\r\n\r\n  return (\r\n    <div className={style.clickIcon} onClick={onClick} data-tip={tooltipText} >\r\n      {props.children}\r\n      <ReactTooltip place=\"bottom\" type=\"dark\" effect=\"solid\" />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ClickIcon","import React, {Component} from 'react'\r\nimport style from './input-file.module.scss';\r\nimport classNames from 'classnames';\r\nimport ReactTooltip from 'react-tooltip'\r\n\r\n\r\nconst InputFile = props => {\r\n  const onChangeFile = e => {\r\n    const input = e.target;\r\n    // always need to create new objects for the difference in arrays input.files[0]\r\n    const inputClone = input.cloneNode(true);\r\n\r\n    if (inputClone.files[0]) props.onChangeFile(inputClone)\r\n  }\r\n\r\n  const {tooltipText} = props;\r\n\r\n  return (\r\n    <div data-tip={tooltipText} onClick={e => e.stopPropagation()}>\r\n      <label class={style.uploadFile}>\r\n        {props.children}\r\n        <input className={style.input} type=\"file\" onChange={onChangeFile}  />\r\n        {tooltipText && <ReactTooltip place=\"bottom\" type=\"dark\" effect=\"solid\"/>}\r\n      </label>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default InputFile;","import React, {Component} from 'react'\r\nimport style from './fix-mark.module.scss'\r\nimport ReactTooltip from 'react-tooltip'\r\nimport cn from 'classnames'\r\n\r\n\r\nconst FixMark = props => {\r\n  const checkMark = props.check ? style.check : '';\r\n  const textMark = props.check ? 'Открепить' : 'Закрепить'\r\n\r\n  const onClick = e => {\r\n    e.stopPropagation();\r\n    props.onClick()\r\n  }\r\n\r\n  return (\r\n    <div className={cn(style.fixMark, checkMark)} onClick={onClick} data-tip={textMark} >\r\n      <i class=\"fas fa-thumbtack\"></i>\r\n      <ReactTooltip place=\"bottom\" type=\"dark\" effect=\"solid\"/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default FixMark","import React, {Component} from 'react'\r\nimport style from './note-bottom-panel.module.scss'\r\nimport ChooseСolor from '../choose-color/choose-color'\r\nimport ClickIcon from '../click-icon'\r\nimport ReactTooltip from 'react-tooltip'\r\nimport InputFile from '../input-file/input-file'\r\nimport FixMark from '../fix-mark/fix-mark'\r\nimport cn from 'classnames'\r\n\r\n\r\nconst NoteBottomPanel = props => {\r\n\r\n  const showPanels = props.panels.map(item => {\r\n    switch (item.name) {\r\n      case 'color' :\r\n        const {position, getColor, currentColor} = item;\r\n        const props = {position, getColor, currentColor};\r\n\r\n        return (\r\n          <div className={style.icon} data-tip=\"Изменить цвет\">\r\n            <ChooseСolor {...props} />\r\n          </div>\r\n        )\r\n      case 'delNote' :\r\n        const {onClickDelNoteBtn} = item;\r\n\r\n        return (\r\n          <div className={style.icon}>\r\n            <ClickIcon tooltipText=\"Удалить заметку\" onClick={onClickDelNoteBtn}>\r\n              <i class=\"far fa-trash-alt\"></i>\r\n            </ClickIcon>\r\n          </div>\r\n        )\r\n      case 'createClone' :\r\n        const {onClickCreateCloneBtn} = item;\r\n\r\n        return (\r\n          <div className={style.icon}>\r\n            <ClickIcon tooltipText=\"Создать Копию\" onClick={onClickCreateCloneBtn}>\r\n              <i class=\"far fa-clone\"></i>\r\n            </ClickIcon>\r\n          </div>\r\n        )\r\n      case 'addImg' :\r\n        const {addImg} = item;\r\n\r\n        return (\r\n          <div className={style.icon} data-tip=\"Добавить картинку\">\r\n            <InputFile onChangeFile={addImg}>\r\n              <i class=\"far fa-image\" />\r\n            </InputFile>\r\n          </div>\r\n        )\r\n      case 'fixMark' :\r\n        const {fixMark, onClickFixMark} = item;\r\n\r\n        return (\r\n          <div className={style.icon}>\r\n            <FixMark check={fixMark} onClick={onClickFixMark} />\r\n          </div>\r\n        )\r\n    }\r\n  })\r\n\r\n  const noteBottomClass = props.noteBottomClass ? props.noteBottomClass : ''\r\n\r\n  return (\r\n    <div className={cn(style.noteBottomPanel, noteBottomClass)} >\r\n      {showPanels}\r\n      <ReactTooltip place=\"bottom\" type=\"dark\" effect=\"solid\"/>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\nexport default NoteBottomPanel;","import NoteBottomPanel from './note-bottom-panel';\r\n\r\nexport default NoteBottomPanel;\r\n","import React, {Component} from 'react'\r\nimport {connect} from 'react-redux';\r\nimport {addMarkNote, delNote, deleteAllNote, updateNote, clearMarkNotes, addItem} from '../../redux/notes-reducer'\r\nimport { compose } from 'redux'\r\nimport { firestoreConnect } from 'react-redux-firebase'\r\nimport Logo from '../common/logo'\r\nimport style from './header.module.scss'\r\nimport NoteBottomPanel from '../common/note-bottom-panel';\r\nimport cn from 'classnames'\r\n\r\n\r\n\r\nclass Header extends Component {\r\n\r\n  yyyyyy = () => {\r\n    this.props.removeAllMarkNote()\r\n  }\r\n\r\n  getForAllNotes = f => {\r\n    // this.props.markNotes.forEach(el => {\r\n    //   f()\r\n    // })\r\n  }\r\n\r\n  changeColor = bgColor => {\r\n    this.props.markNotes.forEach(el => {\r\n      this.props.updateNote(el.id, {bgColor})\r\n    })\r\n    // this.getForAllNotes((this.props.updateNote )\r\n    // \r\n  }\r\n\r\n  cloneNote = () => {\r\n    this.props.markNotes.forEach(el => {\r\n      let {...note} = el;\r\n      delete note.id\r\n\r\n      this.props.addNote(note)\r\n    })\r\n  }\r\n  \r\n  render() {\r\n    const {markNotes} = this.props;\r\n\r\n    const fixMarkValue = markNotes.find(item => item.fixMark) ? true : false\r\n\r\n    const onClickFixMark = () => {\r\n      markNotes.forEach(el => {\r\n        this.props.updateNote(el.id, {fixMark: !fixMarkValue})\r\n      })\r\n    }\r\n    \r\n    const panels = [\r\n      {\r\n        name: 'fixMark',\r\n        fixMark: () => fixMarkValue,\r\n        onClickFixMark: () => onClickFixMark(),\r\n      }, {\r\n        name: 'color',\r\n        position: 'positionBottomLeft',\r\n        getColor: this.changeColor,\r\n      }, {\r\n        name: 'delNote',\r\n        onClickDelNoteBtn: () => this.props.deleteAllNote(this.props.markNotes),\r\n      }, {\r\n        name: 'createClone',\r\n        onClickCreateCloneBtn: () => this.cloneNote(),\r\n      }\r\n    ]\r\n    \r\n    return (\r\n      <div className={style.header}>\r\n        {(markNotes.length > 0) && (\r\n          <div className={style.headerNotice}>\r\n            <div className={cn('container', style.noticeContainer)}>\r\n              <div className={style.headerNoticeMain}>\r\n                <div onClick={this.yyyyyy}>\r\n                  <i class=\"fas fa-times\"></i>\r\n                </div>\r\n                <div className={style.noticeTitle}>Выбрана {markNotes.length} заметка</div>\r\n                <NoteBottomPanel panels={panels} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n        <div className=\"container\">\r\n          <div className={style.main}>\r\n            <Logo />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    markNotes: state.notesReducer.markNotes,\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    addMarkNote: id => dispatch(addMarkNote(id)),\r\n    deleteNote: (note) => dispatch(delNote(note)),\r\n    removeAllMarkNote: () => dispatch(clearMarkNotes()),\r\n    deleteAllNote: (notes) => dispatch(deleteAllNote(notes)),\r\n    updateNote: (id, obj) => dispatch(updateNote(id, obj)),\r\n    addNote: (item) => dispatch(addItem(item)),\r\n  }\r\n}  \r\n\r\nexport default compose(\r\n  connect(mapStateToProps, mapDispatchToProps),\r\n  firestoreConnect([\r\n    { collection: 'projects' },\r\n    { collection: 'notes' }\r\n  ])\r\n)(Header)\r\n\r\n","import Header from './header';\r\n\r\nexport default Header;\r\n","import React, {Component} from 'react'\r\nimport cn from 'classnames'\r\nimport autosize from 'autosize'\r\nimport style from './panel-title.module.scss'\r\n\r\nexport default class PanelTitle extends Component {\r\n  textarea = React.createRef();\r\n\r\n  state = {\r\n    title: this.props.value || '',\r\n  }\r\n\r\n  componentDidMount() {\r\n    autosize(this.textarea.current);\r\n  }\r\n\r\n  onTitleChange = (e) => {\r\n    this.setState({title: e.currentTarget.value});\r\n    this.props.getTitle(e.currentTarget.value)\r\n  }\r\n\r\n  render() {\r\n    // const mainClasses = props.classes ? props.classes.map(cls => style[cls]) : [];\r\n    const textareaClass = this.props.textareaClass ? this.props.textareaClass : ''\r\n\r\n    return (\r\n      <div className={style.panelTitle}>\r\n        <textarea className={cn(style.textarea, this.props.textareaClass)}\r\n                  onChange={this.onTitleChange} \r\n                  value={this.state.title} \r\n                  placeholder=\"Заголовок\" \r\n                  ref={this.textarea} />\r\n      </div>\r\n    )\r\n  }\r\n}","import PanelTitle from './panel-title';\r\n\r\nexport default PanelTitle;\r\n","import FixMark from './fix-mark';\n\nexport default FixMark;\n","import React, {Component} from 'react'\r\nimport baseBtn from '../../../styles/btn.module.scss'\r\nimport style from './add-btn.module.scss'\r\n\r\n\r\nconst addBtn = props => {\r\n  return (\r\n    <div class={`${baseBtn.btn} ${style.btn}`} role=\"button\" onClick={props.onClick}>\r\n      {props.text}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default addBtn","import addBtn from './add-btn';\n\nexport default addBtn;\n","const setImgPreview = (input, callback) => {\r\n\r\n  if (input.files && input.files[0]) {\r\n    var reader = new FileReader();\r\n\r\n    let $this = this;\r\n\r\n    reader.onload = function (e) {\r\n      callback(e.target.result);\r\n    };\r\n\r\n    reader.readAsDataURL(input.files[0]);\r\n  }\r\n}\r\n\r\nexport default setImgPreview;","import PicturePreview from './picture-preview';\n\nexport default PicturePreview;\n","import React, {Component} from 'react'\r\nimport setImgPreview from '../../../utils/set-img-preview'\r\n// import baseBtn from '../../../styles/btn.module.scss'\r\nimport ClickIcon from '../../common/click-icon/click-icon'\r\nimport cn from 'classnames'\r\nimport style from './picture-preview.module.scss'\r\n\r\n\r\nclass PicturePreview extends Component {\r\n  state = {\r\n    picture: null\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.input) {\r\n      this.setImgPreview(this.props.input)\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    console.log('======')\r\n\r\n    if (prevProps.input === null && this.props.input.files[0]) {\r\n        this.setImgPreview(this.props.input)\r\n    }\r\n\r\n    if (prevProps.input !== null) {\r\n      if (prevProps.input.files[0] !== this.props.input.files[0]) {\r\n        this.setImgPreview(this.props.input)\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  setImgPreview = (input) => {\r\n    setImgPreview(input, (picture) => {\r\n      console.log(picture)\r\n      this.setState({picture})\r\n    })\r\n  }\r\n\r\n  render() {\r\n    \r\n    return (\r\n      <div className={style.pictureBox}>\r\n        {(this.props.initialPicture && !this.props.input) && (\r\n          <div>\r\n            <img className={cn('img-fluid', style.img)} \r\n                  src={this.props.initialPicture} \r\n                  alt=\"Uploaded images\" />\r\n          </div>\r\n        )}\r\n\r\n\r\n        {this.state.picture && (\r\n          <div>\r\n            <img className={cn('img-fluid', style.img)} \r\n                  src={this.state.picture} \r\n                  alt=\"Uploaded images\" />\r\n          </div>\r\n        )}\r\n        {/* {this.state.picture === null && <Spinner />} */}\r\n      </div>\r\n      )\r\n  }\r\n}\r\n\r\nexport default PicturePreview","import React, {Component} from 'react'\r\nimport style from './note-panel.module.scss'\r\nimport autosize from 'autosize'\r\n\r\nclass notePanel extends Component {\r\n  input = React.createRef();\r\n\r\n  state = {\r\n    value: this.props.value || '',\r\n  }\r\n\r\n  componentDidMount() {\r\n    autosize(this.input.current);\r\n  }\r\n  \r\n  onChange = e => {\r\n    this.setState({value: e.currentTarget.value});\r\n    this.props.getText(e.currentTarget.value)\r\n  }\r\n\r\n  deactivateEditMode() {\r\n    this.setState( {\r\n      editMode: false\r\n    });\r\n  }\r\n\r\n  activateEditMode = () => {\r\n    this.setState( {\r\n      editMode: true\r\n    } );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={style.notePanel}>\r\n        <textarea className={style.textarea} \r\n                type=\"text\" value={this.state.value} \r\n                placeholder={this.props.placeholder || \"Заметка\"}\r\n                onChange={this.onChange} \r\n                ref={this.input} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default notePanel;","import notePanel from './note-panel';\n\nexport default notePanel;\n","import TodoListItem from './todo-list-item';\r\n\r\nexport default TodoListItem;\r\n","import React, {Component} from 'react'\r\nimport cn from 'classnames'\r\nimport style from './todo-list-item.module.scss'\r\n\r\n\r\n\r\nclass ListItem extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.input = React.createRef();\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.focus) {\r\n      this.input.current.focus();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { value, checkbox, \r\n            onDeleteTodoListItem, onChangeTextField, onClickCompletedCheckbox} = this.props;\r\n    let liClasses = cn(style.listItem, [(this.props.className || ''), (this.props.checkbox ? style.active : '')]);\r\n\r\n    // if ( this.props.checkbox ) liClasses += className(liClasses, style.acitve);\r\n\r\n    \r\n    return (\r\n      <li className={ liClasses}>\r\n        <div className={style.checkbox}\r\n             onClick={onClickCompletedCheckbox} >\r\n          <i className={cn(\"fas fa-check\", style.checkboxMark)}></i>\r\n        </div>\r\n        <input className={style.input}\r\n               type=\"text\"\r\n               value={ value }\r\n               onChange={ (e) => onChangeTextField(e.target.value) }\r\n               ref={ this.input } \r\n            />\r\n        <div className={style.closeBtn} \r\n           onClick={ onDeleteTodoListItem } >\r\n            <i class=\"fas fa-times\"></i>\r\n        </div>\r\n      </li>\r\n    );\r\n  }                           \r\n}\r\n\r\nexport default ListItem;","import React, {Component} from 'react'\r\nimport TodoListItem from '../todo-list-item'\r\nimport style from './list-items.module.scss'\r\n\r\n\r\nconst ListItems = props => {\r\n  // const { items, \r\n  //   onDeleteTodoListItem, onClickCompletedCheckbox, onChangeTextField \r\n  // } = props;\r\n  const { items,  onChangeTextField, onClickCompletedCheckbox, onDeleteTodoListItem } = props;\r\n\r\n  const todoListItems = () => {\r\n    if (props.viewMode && props.viewMode === \"only-view\") {\r\n      return items.map((item, index, array) => {\r\n        \r\n        return <TodoListItem  id={item.id} \r\n                              value={item.value} \r\n                              checkbox={item.checkbox}\r\n                              onDeleteTodoListItem={ () => {} }\r\n                              onChangeTextField={ () => {} }\r\n                              onClickCompletedCheckbox={ () => {} }  \r\n                              focus={false} \r\n                              className={style.listItem} \r\n                              />\r\n      });\r\n\r\n    } else {\r\n      return items.map((item, index, array) => {\r\n        const focus = (index === (array.length - 1)) ? true : false;\r\n        \r\n        return <TodoListItem  id={item.id} \r\n                              value={item.value} \r\n                              checkbox={item.checkbox}\r\n                              onDeleteTodoListItem={ () => { onDeleteTodoListItem(item.id) } }\r\n                              onChangeTextField={ (value) => onChangeTextField(item.id, value)  }\r\n                              onClickCompletedCheckbox={ () => onClickCompletedCheckbox(item.id)  }\r\n                              focus={focus} \r\n                              className={style.listItem}\r\n                              />\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  return <ul className={`list-items ${props.className}`} > { todoListItems() } </ul>\r\n}\r\n\r\nexport default ListItems;","import React, {Component} from 'react'\r\n// import {connect} from 'react-redux';\r\n// import {addNote} from '../../redux/notes-reducer'\r\n// import BottomPanel from './../bottom-panel';\r\nimport style from './form.module.scss'\r\n\r\n\r\n\r\n\r\nclass Form extends React.Component {\r\n  state = {\r\n    value: \"\"\r\n  }\r\n\r\n  onChangeInputText = (e) => {\r\n    this.props.onChangeForm(e.target.value);\r\n    this.setState({ value: \"\" });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={style.form}>\r\n        <div className={style.icon}>\r\n          <i class=\"fas fa-plus\" />\r\n        </div>\r\n        <input type=\"text\" className={style.formInput} placeholder=\"Новый пункт\" \r\n               value={ this.state.value}\r\n               onChange={ this.onChangeInputText }/>\r\n      </div>\r\n    );   \r\n  }                        \r\n}\r\n\r\nexport default Form;","import ListItems from './list-items';\r\n\r\nexport default ListItems;\r\n","import Form from './form';\r\n\r\nexport default Form;\r\n","import React, {Component} from 'react'\r\nimport ListItems from './list-items'\r\nimport Form from './form'\r\nimport style from './list.module.scss'\r\n\r\nexport default class List extends Component {\r\n  state = {\r\n    itemId: 1,\r\n    lists: [],\r\n  }\r\n\r\n  componentDidMount() {\r\n    const lists = this.props.lists;\r\n\r\n    if (lists) {\r\n      const itemId = lists[lists.length - 1].id + 1;\r\n\r\n      this.setState({lists, itemId})\r\n    }\r\n  }\r\n\r\n  createTodoItem = (value = \"\") => {\r\n    return {\r\n      id: this.state.itemId++, \r\n      value: value, \r\n      checkbox: false,\r\n    }\r\n  }\r\n  \r\n  onChangeTextField = (inputId, value) => {\r\n    this.setState((state) => {\r\n      const [...listsCopy] = state.lists;\r\n      const idx =  listsCopy.findIndex((item) => item.id === inputId);\r\n      const lists = [\r\n        ...listsCopy.slice(0, idx),\r\n        {\r\n          ...listsCopy[idx],\r\n          value\r\n        },\r\n        ...listsCopy.slice(idx + 1)\r\n      ];\r\n\r\n      this.props.returningItems(lists);\r\n\r\n      return { lists };\r\n    });\r\n  }\r\n\r\n  onClickCompletedCheckbox = (id) => {\r\n    this.setState((state) => {\r\n      const [...listsCopy] = state.lists;\r\n      const idx = listsCopy.findIndex((item) => item.id === id);\r\n      const lists = [\r\n        ...listsCopy.slice(0, idx),\r\n        {\r\n          ...listsCopy[idx],\r\n          checkbox: !listsCopy[idx].checkbox\r\n        },\r\n        ...listsCopy.slice(idx + 1)\r\n      ];\r\n\r\n      this.props.returningItems(lists);\r\n      \r\n      return { lists };\r\n    });\r\n  }\r\n\r\n  onDeleteTodoListItem = id => {\r\n    this.setState((state) => {\r\n      const idx = state.lists.findIndex((item) => item.id === id);\r\n      const lists = [\r\n        ...state.lists.slice(0, idx),\r\n        ...state.lists.slice(idx + 1)\r\n      ]\r\n      \r\n      this.props.returningItems(lists);\r\n\r\n      return { lists };\r\n    });\r\n  }\r\n\r\n  addTodoItem = (value) => {\r\n    this.setState((state) => {\r\n      const lists = [\r\n        ...state.lists,\r\n        this.createTodoItem(value)\r\n      ];\r\n\r\n      this.props.returningItems(lists)\r\n\r\n      return { lists }\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={style.todoList}>\r\n        <ListItems items={this.state.lists}\r\n                   onChangeTextField={this.onChangeTextField}\r\n                    onClickCompletedCheckbox={ this.onClickCompletedCheckbox } \r\n                   onDeleteTodoListItem={ this.onDeleteTodoListItem } /> \r\n        <Form onChangeForm={this.addTodoItem} />\r\n      </div>\r\n    )\r\n  }\r\n}","import List from './list';\r\n\r\nexport default List;\r\n","import ListNotePanel from './list-note-panel';\r\n\r\nexport default ListNotePanel;\r\n","import React, {Component} from 'react'\r\n// import {connect} from 'react-redux';\r\n// import {addNote} from '../../redux/notes-reducer'\r\n// import BottomPanel from './../bottom-panel';\r\nimport style from './list-note-panel.module.scss'\r\nimport ListItems from '../../common/list/list-items/list-items'\r\nimport Form from '../../common/list/form/form'\r\n\r\n\r\nimport List from '../../common/list'\r\n\r\n\r\nclass ListNotePanel extends Component {\r\n  state = {\r\n    lists: [],\r\n  }\r\n  \r\n  returningItems = lists => {\r\n    this.setState(state => {\r\n      \r\n      this.props.getList({ lists });\r\n      \r\n      return { lists }\r\n      \r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <List returningItems={this.returningItems} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport default ListNotePanel;","const validateTextFields = (text) => {\r\n  if (text.length === 0 || text.replace(/\\s/g,'') == '') {\r\n    return null\r\n  }\r\n\r\n  return text;\r\n}\r\n\r\nexport default validateTextFields;","import NotePanelView from './note-panel-view';\n\nexport default NotePanelView;\n","import React, {Component} from 'react'\r\nimport NoteBottomPanel from '../../common/note-bottom-panel';\r\nimport PanelTitle from '../../common/panel-title'\r\nimport FixMark from '../../common/fix-mark'\r\nimport AddBtn from '../../common/add-btn'\r\nimport PicturePreview from '../../common/picture-preview'\r\nimport ClickIcon from '../../common/click-icon'\r\nimport NotePanel from './../../common/note-panel'\r\nimport ListNotePanel from './../list-note-panel'\r\nimport getImgSizes from '../../../utils/get-image-sizes'\r\nimport validateTextFields from '../../../utils/validateTextFields'\r\nimport style from './note-panel-view.module.scss'\r\n\r\n\r\nclass NotePanelView extends Component {\r\n  state = {\r\n    progress: 0,\r\n    currentColor: '#ffffff',\r\n    note: {\r\n      fixMark: false,\r\n    },\r\n  }\r\n  \r\n  onClickFixMark = () => {\r\n    this.setState(state => {\r\n      return {\r\n        note: {\r\n          ...state.note,\r\n          fixMark: !state.note.fixMark\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  onClickAddBtn = () => {\r\n    const input = this.props.input;\r\n\r\n    if (input) {\r\n      getImgSizes(input, (imgWidth, imgHeight) => {\r\n        this.setState(state => {\r\n          const note = {\r\n            ...state.note,\r\n            imgWidth, imgHeight\r\n          }\r\n\r\n          this.props.onClickAddBtn(note)\r\n        })\r\n      })\r\n    } else {\r\n      this.props.onClickAddBtn(this.state.note)\r\n    }  \r\n  }\r\n\r\n  onDelete = () => {\r\n    this.props.setInput(null)\r\n  }\r\n\r\n  getColor = currentColor => {\r\n    this.setState({\r\n      currentColor\r\n    })\r\n    this.props.setData({ bgColor: currentColor})\r\n  }\r\n\r\n  getTitle = title => {\r\n    const validField = validateTextFields(title);\r\n    const result = validField === null ? null : {title: validField};\r\n\r\n    this.props.setData(result);\r\n  }\r\n\r\n  getText = text => {\r\n    const validField = validateTextFields(text);\r\n    const result = validField === null ? null : {text: validField};\r\n\r\n    this.props.setData(result);\r\n  }\r\n\r\n  getList = list => {\r\n    if (list.length === 0) {\r\n      this.props.setData(null);\r\n    } else {\r\n      this.props.setData(list);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const panels = [\r\n      {\r\n        name: 'addImg',\r\n        addImg: (input) => this.props.setInput(input),\r\n      }, {\r\n        name: 'color',\r\n        currentColor: this.state.currentColor,\r\n        getColor: bgColor => this.getColor(bgColor),\r\n      },\r\n    ]\r\n\r\n    let children;\r\n\r\n    switch(this.props.view) {\r\n      case 'note' :\r\n      case 'img' :\r\n        children = <NotePanel getText={this.getText} />\r\n        break;\r\n      case 'list' :\r\n        children = <ListNotePanel getList={this.getList} />\r\n        break;\r\n    }\r\n    \r\n    return (\r\n      <>\r\n        <div className={style.pictureBox}>\r\n          {this.props.input && (\r\n            <div className={style.picturePreview}>\r\n              <PicturePreview input={this.props.input} />\r\n            </div>\r\n          )}\r\n          <div className={style.deleteIcon}>\r\n            <ClickIcon onClick={this.onDelete} \r\n                        tooltipText=\"Удалить картинку\">\r\n              <i class=\"far fa-trash-alt\" />\r\n            </ClickIcon>\r\n          </div>\r\n        </div>\r\n        <PanelTitle getTitle={this.getTitle}\r\n                    textareaClass={style.title} />\r\n        <div className={style.fixMark}>\r\n          <FixMark check={this.state.note.fixMark} onClick={this.onClickFixMark} />\r\n        </div>\r\n\r\n        {children}\r\n\r\n        <div className={style.bottomPanel}>\r\n          <div className={style.bottomPanelBox}>\r\n            <NoteBottomPanel panels={panels}\r\n                            noteBottomClass={style.noteBottom} />\r\n          </div>\r\n          <AddBtn text=\"Добавить\" onClick={this.onClickAddBtn} />\r\n        </div>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nexport default NotePanelView;","import DefaultPanel from './default-panel';\n\nexport default DefaultPanel;\n","import React, {Component} from 'react'\r\nimport style from './default-panel.module.scss'\r\nimport ClickIcon from '../../common/click-icon'\r\nimport className from 'classnames'\r\nimport InputFile from '../../common/input-file/input-file'\r\n\r\n\r\nconst DefaultPanel = props => {\r\n  const { setPanelView } = props;\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className={style.textarea} onClick={() => setPanelView('note')} >\r\n        Заметка…\r\n      </div>\r\n      <div className={className(style.icon, style.listIcon)} onClick={() => setPanelView('list')} >\r\n        <ClickIcon tooltipText=\"Создать список\" \r\n                   onClick={() => setPanelView('list')}>\r\n          <i class=\"far fa-check-square\"></i>\r\n        </ClickIcon>\r\n      </div>\r\n      <div className={className(style.icon, style.imgIcon)}>\r\n        <InputFile onChangeFile={input => setPanelView('img', input)} \r\n                    tooltipText=\"Создать фотозаметку\">\r\n          <i class=\"far fa-image\" />\r\n        </InputFile>\r\n      </div>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default DefaultPanel;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\n\n\nconst OutsideAlerter = (View) => {\n  return class extends Component {\n    constructor(props) {\n      super(props);\n\n      this.setWrapperRef = this.setWrapperRef.bind(this);\n      this.handleClickOutside = this.handleClickOutside.bind(this);\n\n      this.state = {\n        show: true\n      }\n    }\n\n    componentDidMount() {\n      document.addEventListener('mousedown', this.handleClickOutside);\n    }\n\n    componentWillUnmount() {\n      document.removeEventListener('mousedown', this.handleClickOutside);\n    }\n\n    /**\n     * Set the wrapper ref\n     */\n    setWrapperRef(node) {\n      this.wrapperRef = node;\n    }\n\n    /**\n     * Alert if clicked on outside of element\n     */\n    handleClickOutside(event) {\n      if (this.wrapperRef && !this.wrapperRef.contains(event.target)) {\n        this.setState({show: false})\n      } else {\n        this.setState({show: true})\n      }\n    }\n\n    render() {\n      const { show } = this.state;\n      \n      return <View {...this.props} show={show} hhhhh={this.setWrapperRef} />\n    }\n    \n  };\n};\n\nexport default OutsideAlerter;\n","import React, {Component} from 'react'\r\nimport {connect} from 'react-redux';\r\nimport {addNote, addItem} from '../../redux/notes-reducer'\r\nimport style from './add-notes-panel.module.scss'\r\nimport { firestoreConnect } from 'react-redux-firebase'\r\nimport { compose } from 'redux'\r\nimport NotePanelView from './note-panel-view'\r\nimport DefaultPanel from './default-panel'\r\nimport OutsideAlerter from '../../hoc/with-outside-alerter'\r\nimport cn from 'classnames'\r\n\r\n\r\nclass AddNotesPanel extends Component {\r\n  defaultNoteView = {\r\n    bgColor: '#ffffff',\r\n  }\r\n\r\n  state = {\r\n    emptyField: true,\r\n    input: null,\r\n    view: '',\r\n    note: {\r\n      ...this.defaultNoteView\r\n    },\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.props.show !== prevProps.show) {\r\n      this.setState(state => {\r\n        return {\r\n          emptyField: true,\r\n          input: null,\r\n          view: '',\r\n          note: {\r\n            ...this.defaultNoteView\r\n          },\r\n        }\r\n      })\r\n      this.changeView('')\r\n    }\r\n  }\r\n\r\n  onClickAddBtn = (note) => {    \r\n    if (!this.state.emptyField || this.state.input) {\r\n      let image;\r\n\r\n      if (this.state.input) {\r\n        image = this.state.input.files[0];\r\n      }\r\n\r\n      this.setState(state => {\r\n        let newNote = {\r\n          ...state.note,\r\n          ...note,\r\n          type: state.view\r\n        }\r\n  \r\n        this.props.addNote(newNote, image);\r\n  \r\n        newNote = {\r\n          ...this.defaultNoteView\r\n        }\r\n  \r\n        return { note: newNote }\r\n      });\r\n\r\n\r\n      this.setState({ emptyField: true })\r\n      this.changeView('');\r\n  \r\n    } else {\r\n      alert('Все поля пустые!')\r\n    }\r\n  }\r\n\r\n  changeView = (view, input) => {\r\n    if (input) this.setState({emptyField: false})\r\n\r\n    this.setState({view, input});\r\n  }\r\n\r\n  setData = dataObj => {\r\n\r\n\r\n    if (dataObj === null) {\r\n      return this.setState({emptyField: true})\r\n    } \r\n    \r\n    this.setState({\r\n      emptyField: false,\r\n      note: {\r\n      ...this.state.note,\r\n      ...dataObj\r\n      }\r\n    })\r\n  }\r\n\r\n  setInput = input => {\r\n    this.setState({input})\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={cn(style.notesPanel, style[this.state.view])}>\r\n        <div className={style.notesPanelWrap} \r\n            ref={this.props.hhhhh} \r\n            style={{backgroundColor: this.state.note.bgColor}}>\r\n\r\n          { (this.state.view === '') && <DefaultPanel setPanelView={this.changeView} /> }\r\n          { (this.state.view !== '') && <NotePanelView onClickAddBtn={this.onClickAddBtn}\r\n                                                        setInput={this.setInput}\r\n                                                        input={this.state.input} \r\n                                                        setData={this.setData} \r\n                                                        view={this.state.view} /> }\r\n\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    notes: state.firestore.ordered.notes\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    addNote: (note, image) => dispatch(addItem(note, image)),\r\n  }\r\n}\r\n\r\nexport default compose(\r\n  connect(mapStateToProps, mapDispatchToProps),\r\n  firestoreConnect([\r\n    { collection: 'notes' }\r\n  ]),\r\n  OutsideAlerter\r\n)(AddNotesPanel)\r\n","import React, { Component } from 'react';\nimport Modal from 'react-modal';\nimport style from './modal-box.module.scss'\n\n\nconst customStyles = {\n  content : {\n    maxWidth              : '600px',\n    width                 : '100%',\n    top                   : '50%',\n    left                  : '50%',\n    right                 : 'auto',\n    bottom                : 'auto',\n    marginRight           : '-50%',\n    transform             : 'translate(-50%, -50%)',\n    zIndex                : '100',\n    padding               : '0',\n    overflow              : 'visible' \n  }\n};\n\nexport default class ModalBox extends Component {\n  render() {\n    \n    return (\n      <Modal isOpen={this.props.isOpen} \n              style={customStyles}\n              overlayClassName={style.ddd}\n              onRequestClose={this.props.onRequestClose} >\n        {this.props.children}\n      </Modal>\n    )\n  }\n}\n","import ModalBox from './modal-box';\n\nexport default ModalBox;\n","import React from 'react';\nimport svg from './puff.svg'\nimport style from './spinner.module.scss';\nimport className from 'classnames'\n\n\nconst Spinner = props => {\n  const mainClasses = props.classes ? props.classes.map(cls => style[cls]) : [];\n\n  return (\n    <div className={style.spinner}>\n      <img className={className(style.spinnerImg, mainClasses)} src={svg} alt=\"\" />\n    </div>\n  );\n};\n\nexport default Spinner;\n","import React, {Component} from 'react'\r\nimport Spinner from '../../common/spinner/spinner'\r\nimport style from './img-box.module.scss'\r\n\r\n\r\nclass ImgBox extends Component {\r\n  state = {\r\n    loader: true,\r\n    height: null,\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.calcHeight()\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.note.imgHeight !== prevProps.note.imgHeight) {\r\n      this.calcHeight()\r\n    }\r\n    \r\n    if (this.props.width !== prevProps.width) {\r\n      this.calcHeight()\r\n    }\r\n  }\r\n\r\n  calcHeight = () => {\r\n    const {imgHeight, imgWidth} = this.props.note;\r\n    const height = this.props.width * (imgHeight / imgWidth);\r\n\r\n    this.setState({height})\r\n  }\r\n\r\n  onLoad = e => {\r\n    this.setState({\r\n      loader: false,\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={style.imgBox} style={{height: this.state.height}}>\r\n        {this.props.note.url && (\r\n          <img className=\"img-fluid\" \r\n                src={this.props.note.url}\r\n                onLoad={this.onLoad} \r\n                onError={this.onError}\r\n                className={style.img} />\r\n        )}\r\n        <Spinner classes={['small']} />\r\n        {/* {this.state.loader && <Spinner classes={['small']} />} */}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ImgBox","import React, {Component} from 'react'\r\nimport ImgBox from '../img-box/img-box'\r\n\r\n\r\nclass ImgHeightLoader extends Component {\r\n  box = React.createRef()\r\n\r\n  state = {\r\n    boxWidth: null,\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({\r\n      boxWidth: this.box.current.offsetWidth,\r\n    })\r\n\r\n    window.addEventListener(\"resize\", this.updateDimensions.bind(this));\r\n  }\r\n  \r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"resize\", this.updateDimensions.bind(this));\r\n  }\r\n\r\n  updateDimensions = () => {\r\n    this.setState({ boxWidth: this.box.current.offsetWidth });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"img-height-loader\" ref={this.box}>\r\n        {this.props.note.imgHeight && (\r\n          <ImgBox note={this.props.note} width={this.state.boxWidth} />\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ImgHeightLoader","import ImgHeightLoader from './img-height-loader';\n\nexport default ImgHeightLoader;\n","import React, {Component} from 'react'\r\nimport {connect} from 'react-redux';\r\nimport { compose } from 'redux'\r\nimport ModalBox from './../../modal-box'\r\nimport PanelTitle from '../../common/panel-title/panel-title'\r\nimport { firestoreConnect } from 'react-redux-firebase'\r\nimport {updateNote, addMarkNote, addItem, addImage, delNote, delImg, replaceImage} from '../../../redux/notes-reducer'\r\nimport NoteBottomPanel from '../../common/note-bottom-panel/note-bottom-panel';\r\nimport AddBtn from '../../common/add-btn/add-btn'\r\nimport NotePanel from '../../common/note-panel/note-panel'\r\nimport setImgSizes from '../../../utils/get-image-sizes'\r\nimport ImgBox from '../../common/img-box/img-box'\r\nimport FixMark from '../../common/fix-mark'\r\nimport PicturePreview from '../../common/picture-preview/picture-preview'\r\nimport * as moment from 'moment';\r\nimport ImgHeightLoader from '../../common/img-height-loader'\r\nimport getImgSizes from '../../../utils/get-image-sizes'\r\nimport cn from 'classnames'\r\nimport style from './modal-container.module.scss'\r\nimport ClickIcon from '../../common/click-icon'\r\n\r\n\r\nclass ModalContainer extends Component {\r\n  state = {\r\n    currentColor: this.props.note.bgColor,\r\n    picture: null,\r\n    inputData: null,\r\n    input: null,\r\n  }\r\n  \r\n  closeModal = e => {\r\n    e.stopPropagation()\r\n    \r\n    this.props.modal(false)\r\n  }\r\n\r\n  setImgParams(input) {\r\n    const image = input.files[0];\r\n\r\n    if (this.props.note.imgHeight) {\r\n        this.props.replaceImage(this.props.note, input)\r\n    } else {\r\n      getImgSizes(input, (imgWidth, imgHeight) => {\r\n        this.props.updateNote(this.props.note.id, {imgWidth, imgHeight})\r\n        this.props.addImage(image, this.props.note.id);\r\n      })\r\n    }\r\n  }\r\n  \r\n  cloneNote = () => {\r\n    let {...note} = this.props.note;\r\n    delete note.id\r\n\r\n    this.props.addNote(note)\r\n  }\r\n\r\n  getColor = currentColor => {\r\n    this.setState({\r\n      currentColor\r\n    })\r\n\r\n    this.props.updateNote(this.props.note.id, {bgColor: currentColor})\r\n  }\r\n  \r\n  onDelete = () => {\r\n    this.props.delImg(this.props.note)\r\n  }\r\n  \r\n  render() {\r\n    const panels = [\r\n      {\r\n        name: 'color',\r\n        currentColor: this.props.note.bgColor,  \r\n        getColor: bgColor => this.getColor(bgColor),  \r\n      }, {\r\n        name: 'addImg',\r\n        addImg: (input) => {this.setImgParams(input)},\r\n      }, \r\n      {\r\n        name: 'delNote',\r\n        onClickDelNoteBtn: () => this.props.deleteNote(this.props.note, this.props.notes),\r\n      }, {\r\n        name: 'createClone',\r\n        onClickCreateCloneBtn: () => this.cloneNote(),\r\n      }\r\n    ]\r\n\r\n  \r\n    return (\r\n      <div>\r\n        {this.props.previewContent}\r\n        <ModalBox isOpen={this.props.modalIsOpen} \r\n                  onRequestClose={this.closeModal}>\r\n          <div style={{backgroundColor: this.props.note.bgColor}}>\r\n            {this.props.note.url && (\r\n              <div className={style.pictureBox}>\r\n                <ImgHeightLoader note={this.props.note} />\r\n                <div className={style.deleteIcon}>\r\n                  <ClickIcon onClick={this.onDelete} \r\n                              tooltipText=\"Удалить картинку\">\r\n                    <i class=\"far fa-trash-alt\" />\r\n                  </ClickIcon>\r\n                </div>\r\n              </div>\r\n            )}\r\n            {/* {this.props.note.url && (\r\n              <PicturePreview initialPicture={this.props.note.url} input={this.state.input} />\r\n            )} */}\r\n            <div className={style.fixMark}>\r\n              <FixMark check={this.props.note.fixMark} onClick={() => this.props.updateNote(this.props.note.id, {fixMark: !this.props.note.fixMark})} />\r\n            </div>\r\n            <div>\r\n\r\n              {this.props.children}\r\n\r\n              <div className={style.date}>Измененно: {moment(this.props.note.time).format('LTS')}</div>\r\n            </div>\r\n            <div className={style.bottomPanel}>\r\n              <div className={style.bottomPanelBox}>\r\n                <NoteBottomPanel panels={panels} />\r\n              </div>\r\n              <div className={style.btns}>\r\n                <AddBtn text=\"Закрыть\" onClick={this.closeModal} />\r\n                {/* <div className={style.cancelBtn}>\r\n                  <AddBtn text=\"Отменить\" onClick={this.cancelModal} />\r\n                </div> */}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </ModalBox>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    notes: state.firestore.ordered.notes,\r\n    markNotes: state.notesReducer.markNotes\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    addImage: (note, id) => dispatch(addImage(note, id)),\r\n    updateNote: (id, obj) => dispatch(updateNote(id, obj)),\r\n    addMarkNote: note => dispatch(addMarkNote(note)),\r\n    addNote: (item) => dispatch(addItem(item)),\r\n    deleteNote: (note, notes) => dispatch(delNote(note, notes)),\r\n    delImg: (note) => dispatch(delImg(note)),\r\n    replaceImage: (note, imgWidth, imgHeight, image) => dispatch(replaceImage(note, imgWidth, imgHeight, image)),\r\n  }\r\n}  \r\n\r\nexport default compose(\r\n  connect(mapStateToProps, mapDispatchToProps),\r\n  firestoreConnect([\r\n    { collection: 'notes' }\r\n  ])\r\n)(ModalContainer)\r\n","import SimpleNotePreview from './simple-note-preview';\r\n\r\nexport default SimpleNotePreview;\r\n","import React, {Component} from 'react'\r\nimport PanelTitle from '../../common/panel-title/panel-title'\r\nimport NotePanel from '../../common/note-panel/note-panel'\r\nimport cn from 'classnames'\r\nimport ModalContainer from '../modal-container/modal-container'\r\nimport style from './simple-note-preview.module.scss'\r\n\r\n\r\nclass SimpleNotePreview extends Component {\r\n  state = {\r\n    note: {\r\n      title: this.props.note.title,\r\n      text: this.props.note.text,\r\n    }\r\n  }\r\n  \r\n  onChangeText = text => {\r\n    this.setState(state => {\r\n      const note = {\r\n        ...state.note,\r\n        text: text\r\n      }\r\n\r\n      return { note }\r\n    })\r\n  }\r\n\r\n  onChangeTitle = title => {\r\n    this.setState(state => {\r\n      const note = {\r\n        ...state.note,\r\n        title: title\r\n      }\r\n\r\n      return { note }\r\n    })\r\n  }\r\n\r\n  setData = () => {\r\n    this.props.updateNote(this.props.note.id, {\r\n      ...this.state.note,\r\n      time: +(new Date()),\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const previewContent = (\r\n      <div className={style.note}>\r\n        <div className={style.main}>\r\n          {this.props.note.title && (\r\n            <div className={style.title}>{this.props.note.title}</div>\r\n          )}\r\n          {this.props.note.text && (\r\n            <div className={style.text}>{this.props.note.text}</div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    )\r\n    \r\n    return (\r\n      <ModalContainer note={this.props.note} \r\n                      previewContent={previewContent} \r\n                      modalIsOpen={this.props.modalIsOpen} \r\n                      modal={this.props.modal} \r\n                      setData={this.setData}>\r\n\r\n        <PanelTitle value={this.props.note.title} getTitle={this.onChangeTitle} textareaClass={style.modalTitle} />\r\n        <NotePanel value={this.props.note.text} placeholder=\"Текст заметки\" getText={this.onChangeText} />\r\n        \r\n      </ModalContainer>\r\n    )\r\n  }\r\n}\r\n\r\nexport default SimpleNotePreview","import React, {Component} from 'react'\r\nimport List from '../../common/list/list'\r\nimport ListItems from '../../common/list/list-items/list-items'\r\nimport PanelTitle from '../../common/panel-title'\r\nimport style from './list-note-preview.module.scss'\r\nimport ModalContainer from '../modal-container/modal-container'\r\n  \r\n\r\nclass ListNotePreview extends Component {\r\n  state = {\r\n    modalIsOpen: false,\r\n\r\n    note: {\r\n      lists: this.props.note.lists,\r\n    }\r\n  }\r\n  \r\n  onChangeTitle = title => {\r\n    this.setState(state => {\r\n      const note = {\r\n        ...state.note,\r\n        title: title\r\n      }\r\n\r\n      return { note }\r\n    })\r\n  }\r\n\r\n  returningItems = lists => {\r\n    this.setState({\r\n      note: {\r\n        ...this.state.note,\r\n        lists\r\n      }\r\n    })\r\n  }\r\n\r\n  setData = data => {\r\n    this.props.updateNote(this.props.note.id, {\r\n      ...this.state.note,\r\n      time: +(new Date()),\r\n    });\r\n    // this.props.replaceImage(this.props.note, data.input)\r\n      \r\n  }\r\n\r\n  // \r\n  render() {\r\n    const previewContent = (\r\n      <div>\r\n        {this.props.note.title && (\r\n          <div className={style.title}>{this.props.note.title}</div>\r\n        )}\r\n        {this.props.note.lists && (\r\n          <div className={style.lists}>\r\n            <ListItems items={this.props.note.lists} viewMode=\"only-view\" /> \r\n          </div>\r\n        )}\r\n      </div>\r\n    )\r\n\r\n    return (\r\n      <ModalContainer note={this.props.note} \r\n                      previewContent={previewContent} \r\n                      modalIsOpen={this.props.modalIsOpen} \r\n                      modal={this.props.modal}\r\n                      setData={this.setData}>\r\n        \r\n        <PanelTitle value={this.props.note.title} getTitle={this.onChangeTitle} textareaClass={style.modalTitle} />\r\n        <List returningItems={this.returningItems} \r\n              lists={this.state.note.lists} />\r\n      \r\n      </ModalContainer>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ListNotePreview;","import React, {Component} from 'react'\r\nimport style from './note-preview.module.scss'\r\nimport NoteBottomPanel from '../common/note-bottom-panel/note-bottom-panel';\r\nimport SimpleNotePreview from './simple-note-preview';\r\nimport ListNotePreview from './list-note-preview/list-note-preview'\r\nimport {updateNote, addMarkNote, addItem, addImage, delNote, replaceImage, delImg} from '../../redux/notes-reducer'\r\nimport {connect} from 'react-redux';\r\nimport { firestoreConnect } from 'react-redux-firebase'\r\nimport { compose } from 'redux'\r\nimport FixMark from '../common/fix-mark/fix-mark'\r\nimport ImgHeightLoader from '../common/img-height-loader/img-height-loader'\r\nimport getImgSizes from '../../utils/get-image-sizes'\r\nimport cn from 'classnames'\r\nimport ClickIcon from '../common/click-icon';\r\n\r\n\r\nclass NotesPreview extends Component {\r\n  state = {\r\n    currentColor: this.props.note.bgColor,\r\n    mark: false,\r\n    modalIsOpen: false,\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    \r\n  }\r\n\r\n  onClickMark = () => {\r\n    // this.setState(state => {\r\n    //   return {mark: !state.mark}\r\n    // })\r\n    \r\n    this.props.addMarkNote(this.props.note)\r\n  }\r\n\r\n  cloneNote = () => {\r\n    let {...note} = this.props.note;\r\n    delete note.id\r\n\r\n    this.props.addNote(note)\r\n  }\r\n\r\n  setImgParams(input) {\r\n    const image = input.files[0];\r\n\r\n    if (this.props.note.imgHeight) {\r\n        this.props.replaceImage(this.props.note, input)\r\n    } else {\r\n      getImgSizes(input, (imgWidth, imgHeight) => {\r\n        this.props.updateNote(this.props.note.id, {imgWidth, imgHeight})\r\n        this.props.addImage(image, this.props.note.id);\r\n      })\r\n    }\r\n  }\r\n\r\n  modal = modalIsOpen => {\r\n    this.setState(state => {\r\n      return {modalIsOpen}\r\n    })\r\n  }\r\n\r\n  buildMain() {\r\n    switch(this.props.note.type) {\r\n      case 'note' :\r\n      case 'img' :\r\n        return <SimpleNotePreview note={this.props.note} \r\n                                  replaceImage={this.props.replaceImage} \r\n                                  updateNote={this.props.updateNote} \r\n                                  modalIsOpen={this.state.modalIsOpen} \r\n                                  modal={this.modal} />\r\n      case 'list' :\r\n        return <ListNotePreview note={this.props.note} \r\n                                updateNote={this.props.updateNote} \r\n                                modalIsOpen={this.state.modalIsOpen} \r\n                                modal={this.modal} />\r\n      default :\r\n        return <div>no note</div>\r\n    }\r\n  }\r\n\r\n  onClickNotePreview = () => {\r\n    this.setState({\r\n      modalIsOpen: true\r\n    })\r\n  }\r\n\r\n  getColor = currentColor => {\r\n    this.setState({\r\n      currentColor\r\n    })\r\n\r\n    this.props.updateNote(this.props.note.id, {bgColor: currentColor})\r\n  }\r\n\r\n  onClickFixMark = () => {\r\n    this.props.updateNote(this.props.note.id, {fixMark: !this.props.note.fixMark})\r\n  }\r\n\r\n  render() {\r\n    const panels = [\r\n      {\r\n        name: 'color',\r\n        currentColor: this.state.currentColor,\r\n        getColor: bgColor => this.getColor(bgColor),\r\n      }, {\r\n        name: 'addImg',\r\n        addImg: (input) => this.setImgParams(input),\r\n      }, {\r\n        name: 'delNote',\r\n        onClickDelNoteBtn: () => this.props.deleteNote(this.props.note, this.props.notes),\r\n      }, {\r\n        name: 'createClone',\r\n        onClickCreateCloneBtn: () => this.cloneNote(),\r\n      }\r\n    ]\r\n\r\n    let bottomPanelPosition = 'relative';\r\n    let paddingTop = null;\r\n\r\n    if (this.props.note.imgHeight) {\r\n      bottomPanelPosition = 'absolute';\r\n    } else {\r\n      paddingTop = style.paddingTop\r\n    }\r\n\r\n    if (this.props.note.text || this.props.note.title || this.props.note.lists) {\r\n      bottomPanelPosition = 'relative';\r\n      paddingTop = style.paddingTop\r\n    } else {\r\n      bottomPanelPosition = 'absolute';\r\n    }\r\n\r\n    if ((this.props.note.imgHeight) && (this.props.note.text || this.props.note.title || this.props.note.lists)) {\r\n      paddingTop = style.paddingTop\r\n    }\r\n    \r\n    return (\r\n      <div className={cn(style.notePreview, this.state.mark && style.activeNote)}  \r\n            style={{backgroundColor: this.props.note.bgColor, opacity: this.state.modalIsOpen ? 0 : 1}}\r\n            onClick={this.onClickNotePreview}>\r\n        <div className={style.notePreviewWrap} >\r\n          <ImgHeightLoader note={this.props.note} />\r\n          <div>\r\n            {/* <div className={style.selectedMark} >\r\n              <ClickIcon onClick={this.onClickMark}>\r\n                <i class=\"fas fa-check-circle\" />\r\n              </ClickIcon>\r\n            </div> */}\r\n            <div className={style.fixMark}>\r\n              <FixMark check={this.props.note.fixMark} \r\n                        onClick={this.onClickFixMark} />\r\n            </div>\r\n            <div className={cn(style.main, paddingTop)}>\r\n              {this.buildMain()}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className={cn(style.NoteBottomPanel, style[bottomPanelPosition])}>\r\n          <NoteBottomPanel panels={panels} />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    notes: state.firestore.ordered.notes,\r\n    markNotes: state.notesReducer.markNotes\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    delImg: (note) => dispatch(delImg(note)),\r\n    addImage: (image, id) => dispatch(addImage(image, id)),\r\n    updateNote: (id, obj) => dispatch(updateNote(id, obj)),\r\n    addMarkNote: note => dispatch(addMarkNote(note)),\r\n    addNote: (item) => dispatch(addItem(item)),\r\n    deleteNote: (note, notes) => dispatch(delNote(note, notes)),\r\n    replaceImage: (note, imgWidth, imgHeight, image) => dispatch(replaceImage(note, imgWidth, imgHeight, image)),\r\n  }\r\n}  \r\n\r\nexport default compose(\r\n  connect(mapStateToProps, mapDispatchToProps),\r\n  firestoreConnect([\r\n    { collection: 'notes' }\r\n  ])\r\n)(NotesPreview)","import NotePreview from './note-preview';\r\n\r\nexport default NotePreview;\r\n","import Spinner from './spinner';\n\nexport default Spinner;\n","import AllNotes from './all-notes';\r\n\r\nexport default AllNotes;\r\n","import React, {Component} from 'react'\r\nimport NotePreview from '../note-preview'\r\nimport {connect} from 'react-redux';\r\nimport {delNote, updateNote, addMarkNote} from '../../redux/notes-reducer'\r\nimport { firestoreConnect } from 'react-redux-firebase'\r\nimport { compose } from 'redux'\r\nimport Spinner from '../common/spinner'\r\nimport style from './all-notes.module.scss'\r\nimport Masonry from 'react-masonry-component';\r\nimport cn from 'classnames'\r\n\r\n\r\nconst AllNotes = props => {\r\n  const masonryOptions = { transitionDuration: 0 };\r\n  const imagesLoadedOptions = { background: '.my-bg-image-el' }\r\n\r\n  const {notes, deleteNote, updateNote, addMarkNote} = props;\r\n  let notesList = [];\r\n  let fixNotesList = [];\r\n\r\n  const sortNotesFunc = (a, b) => {\r\n    if (a.time > b.time) return -1;\r\n    if (a.time == b.time) return 0;\r\n    if (a.time < b.time) return 1;\r\n  }\r\n\r\n  const getMasonry = children => {\r\n    return (\r\n      <Masonry\r\n        className={cn(style.npWrap, '')} // default ''\r\n        // elementType={'ul'} // default 'div'\r\n        options={masonryOptions} // default {}\r\n        disableImagesLoaded={false} // default false\r\n        updateOnEachImageLoad={false} // default false and works only if disableImagesLoaded is false\r\n        imagesLoadedOptions={imagesLoadedOptions} // default {}\r\n        onLayoutComplete={(e) => {console.log(1111, e)}} >\r\n\r\n          {children}\r\n\r\n      </Masonry>\r\n    )\r\n  }\r\n  \r\n  if (notes) {\r\n    let [...sortNotes] = notes;\r\n    sortNotes.sort(sortNotesFunc);\r\n\r\n    const getNote = note => {\r\n      return (\r\n        <NotePreview key={note.id} \r\n                      note={note} \r\n                      updateNote={(obj) => updateNote(note.id, obj)} \r\n                      onClickMark={() => addMarkNote(note.id)} />\r\n      )\r\n    }\r\n\r\n    notesList = sortNotes.filter(note => !note.fixMark).map(getNote)\r\n    fixNotesList = sortNotes.filter(note => note.fixMark).map(getNote)\r\n  }\r\n\r\n  const getNotes = () => {\r\n    if (notes.length !== 0) {\r\n      return (\r\n        <>\r\n          {(fixNotesList.length !== 0) &&\r\n            <>\r\n              <div className={style.fixNotesBox}>\r\n                <div className={style.notesListTitle}>Закрепленные заметки</div>\r\n                {getMasonry(fixNotesList)}\r\n              </div>\r\n            </>}\r\n\r\n          {((fixNotesList.length !== 0) && (notesList.length !== 0)) && (\r\n            <div className={style.notesListTitle}>Другие заметки</div>\r\n          )}\r\n          {(notesList.length !== 0) && getMasonry(notesList)}\r\n        </>\r\n      )\r\n    } else {\r\n      return (\r\n        <div className={style.emptyNotesBox}>Список заметок пуст...</div>\r\n      )\r\n    }\r\n  }\r\n  \r\n  return (\r\n    <div className={style.allNotes}>\r\n      <div className=\"container\">\r\n        <div className={cn(style.main,  style.notesList)} >\r\n          {(notes === undefined) && <Spinner classes={['big']} />}\r\n          {(notes !== undefined) && getNotes()}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    projects: state.firestore.ordered.projects,\r\n    notes: state.firestore.ordered.notes,\r\n    markNotes: state.notesReducer.markNotes,\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    deleteNote: (note, notes) => dispatch(delNote(note, notes)),\r\n    updateNote: (id, obj) => dispatch(updateNote(id, obj)),\r\n    addMarkNote: id => dispatch(addMarkNote(id))\r\n  }\r\n}  \r\n\r\nexport default compose(\r\n  connect(mapStateToProps, mapDispatchToProps),\r\n  firestoreConnect([\r\n    { collection: 'projects' },\r\n    { collection: 'notes' }\r\n  ])\r\n)(AllNotes)","import ErrorBoundry from './error-boundry';\r\n\r\nexport default ErrorBoundry;\r\n","import React, { Component } from 'react';\n\n// import ErrorIndicator from '../error-indicator/error-indicator';\n\nexport default class ErrorBoundry extends Component {\n\n  state = {\n    hasError: false,\n    info: null\n  };\n\n  componentDidCatch(error, {componentStack}) {\n    console.log('componentStack')\n    console.log(componentStack)\n\n    this.setState({\n      hasError: true,\n      info: componentStack\n    });\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <div>{this.state.info}</div>\n      // return <ErrorIndicator />\n    }\n\n    return this.props.children;\n  }\n}\n","import App from './app';\r\n\r\nexport default App;\r\n","import React from 'react';\nimport Header from '../header'\nimport {AddNotesPanel} from '../add-notes-panel'\nimport AllNotes from '../all-notes'\nimport ErrorBoundry from '../error-boundry';\nimport style from './app.module.scss'\n\n\nconst App = () => {\n  return (\n    <ErrorBoundry>\n      \n      <div className={style.app}>\n        <Header />\n\n        <div className={style.main}>\n          <AddNotesPanel />\n          <AllNotes />\n        </div>\n      </div>\n\n    </ErrorBoundry>\n  );\n}\n\nexport default App;\n","import { createStore, combineReducers, applyMiddleware, compose } from 'redux'\r\nimport notesReducer from \"./notes-reducer\";\r\nimport { firestoreReducer } from 'redux-firestore';\r\nimport thunk from 'redux-thunk'\r\nimport { reduxFirestore, getFirestore } from 'redux-firestore';\r\nimport { reactReduxFirebase, getFirebase } from 'react-redux-firebase';\r\nimport fbConfig, {storage} from './../config/fbConfig'\r\n\r\nlet reducers = combineReducers({\r\n  notesReducer,\r\n  firestore: firestoreReducer\r\n});\r\n\r\n\r\n// let store = createStore(reducers);\r\n\r\nconst store = createStore(reducers,\r\n  compose(\r\n    applyMiddleware(thunk.withExtraArgument({getFirebase, getFirestore, storage})),\r\n    reactReduxFirebase(fbConfig), // redux binding for firebase\r\n    reduxFirestore(fbConfig) // redux bindings for firestore\r\n  )\r\n);\r\n\r\nwindow.store = store.getState()\r\n\r\n\r\nexport default store;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.scss';\nimport App from './components/app';\nimport Modal from 'react-modal';\nimport { Provider } from 'react-redux';\nimport {store} from './redux';\n\nModal.setAppElement('#root')\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>, \n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"icon\":\"default-panel_icon__2F9Sf\",\"imgIcon\":\"default-panel_imgIcon__r8BZi\",\"listIcon\":\"default-panel_listIcon__3EB_U\",\"textarea\":\"default-panel_textarea__q9SVX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"img\":\"simple-note-preview_img__3UylK\",\"bottomPanelBox\":\"simple-note-preview_bottomPanelBox__1qXqN\",\"bottomPanel\":\"simple-note-preview_bottomPanel__222qF\",\"noteWrap\":\"simple-note-preview_noteWrap__1LOSl\",\"date\":\"simple-note-preview_date__gxGPL\",\"fixMark\":\"simple-note-preview_fixMark__Iui8j\",\"icon\":\"simple-note-preview_icon__25tfi\",\"imageBox\":\"simple-note-preview_imageBox__3BcK2\",\"title\":\"simple-note-preview_title__1FAu-\",\"text\":\"simple-note-preview_text__1k0HK\",\"modalTitle\":\"simple-note-preview_modalTitle__21gWi\"};"],"sourceRoot":""}